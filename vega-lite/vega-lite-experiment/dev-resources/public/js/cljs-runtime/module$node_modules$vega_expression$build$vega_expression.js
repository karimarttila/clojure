shadow$provide.module$node_modules$vega_expression$build$vega_expression=function(global$jscomp$0,require,module,exports$jscomp$0){(function(global,factory){"object"===typeof exports$jscomp$0&&"undefined"!==typeof module?factory(exports$jscomp$0,require("module$node_modules$vega_util$build$vega_util")):"function"===typeof define&&define.amd?define(["exports","vega-util"],factory):(global="undefined"!==typeof globalThis?globalThis:global||self,factory(global.vega={},global.vega))})(this,function(exports,
vegaUtil){function ASTNode(type){this.type=type}function children(node){switch(node.type){case "ArrayExpression":return node.elements;case "BinaryExpression":case "LogicalExpression":return[node.left,node.right];case "CallExpression":return[node.callee].concat(node.arguments);case "ConditionalExpression":return[node.test,node.consequent,node.alternate];case "MemberExpression":return[node.object,node.property];case "ObjectExpression":return node.properties;case "Property":return[node.key,node.value];
case "UnaryExpression":return[node.argument];default:return[]}}function assert(condition,message){if(!condition)throw Error("ASSERT: "+message);}function isDecimalDigit(ch){return 48<=ch&&57>=ch}function isHexDigit(ch){return 0<="0123456789abcdefABCDEF".indexOf(ch)}function isOctalDigit(ch){return 0<="01234567".indexOf(ch)}function isLineTerminator(ch){return 10===ch||13===ch||8232===ch||8233===ch}function isIdentifierStart(ch){return 36===ch||95===ch||65<=ch&&90>=ch||97<=ch&&122>=ch||92===ch||128<=
ch&&RegexNonAsciiIdentifierStart.test(String.fromCharCode(ch))}function isIdentifierPart(ch){return 36===ch||95===ch||65<=ch&&90>=ch||97<=ch&&122>=ch||48<=ch&&57>=ch||92===ch||128<=ch&&RegexNonAsciiIdentifierPart.test(String.fromCharCode(ch))}function skipComment(){for(;index$jscomp$0<length;){var ch=source.charCodeAt(index$jscomp$0);if(32===ch||9===ch||11===ch||12===ch||160===ch||5760<=ch&&0<=[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(ch)||isLineTerminator(ch))++index$jscomp$0;
else break}}function scanHexEscape(prefix){var code=0;var len="u"===prefix?4:2;for(prefix=0;prefix<len;++prefix)if(index$jscomp$0<length&&isHexDigit(source[index$jscomp$0])){var ch=source[index$jscomp$0++];code=16*code+"0123456789abcdef".indexOf(ch.toLowerCase())}else throwError({},"Unexpected token %0","ILLEGAL");return String.fromCharCode(code)}function getEscapedIdentifier(){var ch=source.charCodeAt(index$jscomp$0++);var id=String.fromCharCode(ch);92===ch&&(117!==source.charCodeAt(index$jscomp$0)&&
throwError({},"Unexpected token %0","ILLEGAL"),++index$jscomp$0,(ch=scanHexEscape("u"))&&"\\"!==ch&&isIdentifierStart(ch.charCodeAt(0))||throwError({},"Unexpected token %0","ILLEGAL"),id=ch);for(;index$jscomp$0<length;){ch=source.charCodeAt(index$jscomp$0);if(!isIdentifierPart(ch))break;++index$jscomp$0;id+=String.fromCharCode(ch);92===ch&&(id=id.substr(0,id.length-1),117!==source.charCodeAt(index$jscomp$0)&&throwError({},"Unexpected token %0","ILLEGAL"),++index$jscomp$0,(ch=scanHexEscape("u"))&&
"\\"!==ch&&isIdentifierPart(ch.charCodeAt(0))||throwError({},"Unexpected token %0","ILLEGAL"),id+=ch)}return id}function scanPunctuator(){var start=index$jscomp$0,code=source.charCodeAt(index$jscomp$0),ch1=source[index$jscomp$0];switch(code){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++index$jscomp$0,{type:7,value:String.fromCharCode(code),start:start,end:index$jscomp$0};default:var code2=source.charCodeAt(index$jscomp$0+1);if(61===code2)switch(code){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return index$jscomp$0+=
2,{type:7,value:String.fromCharCode(code)+String.fromCharCode(code2),start:start,end:index$jscomp$0};case 33:case 61:return index$jscomp$0+=2,61===source.charCodeAt(index$jscomp$0)&&++index$jscomp$0,{type:7,value:source.slice(start,index$jscomp$0),start:start,end:index$jscomp$0}}}code=source.substr(index$jscomp$0,4);if("\x3e\x3e\x3e\x3d"===code)return index$jscomp$0+=4,{type:7,value:code,start:start,end:index$jscomp$0};code=code.substr(0,3);if("\x3e\x3e\x3e"===code||"\x3c\x3c\x3d"===code||"\x3e\x3e\x3d"===
code)return index$jscomp$0+=3,{type:7,value:code,start:start,end:index$jscomp$0};code=code.substr(0,2);if(ch1===code[1]&&0<="+-\x3c\x3e\x26|".indexOf(ch1)||"\x3d\x3e"===code)return index$jscomp$0+=2,{type:7,value:code,start:start,end:index$jscomp$0};"//"===code&&throwError({},"Unexpected token %0","ILLEGAL");if(0<="\x3c\x3e\x3d!+-*%\x26|^/".indexOf(ch1))return++index$jscomp$0,{type:7,value:ch1,start:start,end:index$jscomp$0};throwError({},"Unexpected token %0","ILLEGAL")}function scanNumericLiteral(){var ch=
source[index$jscomp$0];assert(isDecimalDigit(ch.charCodeAt(0))||"."===ch,"Numeric literal must start with a decimal digit or a decimal point");var start=index$jscomp$0;var number="";if("."!==ch){number=source[index$jscomp$0++];ch=source[index$jscomp$0];if("0"===number){if("x"===ch||"X"===ch){++index$jscomp$0;for(number="";index$jscomp$0<length&&isHexDigit(source[index$jscomp$0]);)number+=source[index$jscomp$0++];0===number.length&&throwError({},"Unexpected token %0","ILLEGAL");isIdentifierStart(source.charCodeAt(index$jscomp$0))&&
throwError({},"Unexpected token %0","ILLEGAL");return{type:6,value:parseInt("0x"+number,16),start:start,end:index$jscomp$0}}if(isOctalDigit(ch)){for(number="0"+source[index$jscomp$0++];index$jscomp$0<length&&isOctalDigit(source[index$jscomp$0]);)number+=source[index$jscomp$0++];(isIdentifierStart(source.charCodeAt(index$jscomp$0))||isDecimalDigit(source.charCodeAt(index$jscomp$0)))&&throwError({},"Unexpected token %0","ILLEGAL");return{type:6,value:parseInt(number,8),octal:!0,start:start,end:index$jscomp$0}}ch&&
isDecimalDigit(ch.charCodeAt(0))&&throwError({},"Unexpected token %0","ILLEGAL")}for(;isDecimalDigit(source.charCodeAt(index$jscomp$0));)number+=source[index$jscomp$0++];ch=source[index$jscomp$0]}if("."===ch){for(number+=source[index$jscomp$0++];isDecimalDigit(source.charCodeAt(index$jscomp$0));)number+=source[index$jscomp$0++];ch=source[index$jscomp$0]}if("e"===ch||"E"===ch){number+=source[index$jscomp$0++];ch=source[index$jscomp$0];if("+"===ch||"-"===ch)number+=source[index$jscomp$0++];if(isDecimalDigit(source.charCodeAt(index$jscomp$0)))for(;isDecimalDigit(source.charCodeAt(index$jscomp$0));)number+=
source[index$jscomp$0++];else throwError({},"Unexpected token %0","ILLEGAL")}isIdentifierStart(source.charCodeAt(index$jscomp$0))&&throwError({},"Unexpected token %0","ILLEGAL");return{type:6,value:parseFloat(number),start:start,end:index$jscomp$0}}function testRegExp(pattern,flags){var tmp=pattern;0<=flags.indexOf("u")&&(tmp=tmp.replace(/\\u\{([0-9a-fA-F]+)\}/g,function($0,$1){if(1114111>=parseInt($1,16))return"x";throwError({},"Invalid regular expression")}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,
"x"));try{new RegExp(tmp)}catch(e){throwError({},"Invalid regular expression")}try{return new RegExp(pattern,flags)}catch(exception){return null}}function advance(){skipComment();if(index$jscomp$0>=length)return{type:2,start:index$jscomp$0,end:index$jscomp$0};var ch=source.charCodeAt(index$jscomp$0);if(isIdentifierStart(ch)){ch=index$jscomp$0;if(92===source.charCodeAt(index$jscomp$0))var id=getEscapedIdentifier();else a:{for(id=index$jscomp$0++;index$jscomp$0<length;){var ch$jscomp$0=source.charCodeAt(index$jscomp$0);
if(92===ch$jscomp$0){index$jscomp$0=id;id=getEscapedIdentifier();break a}if(isIdentifierPart(ch$jscomp$0))++index$jscomp$0;else break}id=source.slice(id,index$jscomp$0)}return{type:1===id.length?3:keywords.hasOwnProperty(id)?4:"null"===id?5:"true"===id||"false"===id?1:3,value:id,start:ch,end:index$jscomp$0}}if(40===ch||41===ch||59===ch)return scanPunctuator();if(39===ch||34===ch){var str="";ch$jscomp$0=!1;ch=source[index$jscomp$0];assert("'"===ch||'"'===ch,"String literal must starts with a quote");
id=index$jscomp$0;for(++index$jscomp$0;index$jscomp$0<length;){var ch$jscomp$1=source[index$jscomp$0++];if(ch$jscomp$1===ch){ch="";break}else if("\\"===ch$jscomp$1)if((ch$jscomp$1=source[index$jscomp$0++])&&isLineTerminator(ch$jscomp$1.charCodeAt(0)))"\r"===ch$jscomp$1&&"\n"===source[index$jscomp$0]&&++index$jscomp$0;else switch(ch$jscomp$1){case "u":case "x":if("{"===source[index$jscomp$0]){++index$jscomp$0;var code=source[index$jscomp$0];ch$jscomp$1=0;for("}"===code&&throwError({},"Unexpected token %0",
"ILLEGAL");index$jscomp$0<length;){code=source[index$jscomp$0++];if(!isHexDigit(code))break;ch$jscomp$1=16*ch$jscomp$1+"0123456789abcdef".indexOf(code.toLowerCase())}(1114111<ch$jscomp$1||"}"!==code)&&throwError({},"Unexpected token %0","ILLEGAL");ch$jscomp$1=65535>=ch$jscomp$1?String.fromCharCode(ch$jscomp$1):String.fromCharCode((ch$jscomp$1-65536>>10)+55296,(ch$jscomp$1-65536&1023)+56320);str+=ch$jscomp$1}else str+=scanHexEscape(ch$jscomp$1);break;case "n":str+="\n";break;case "r":str+="\r";break;
case "t":str+="\t";break;case "b":str+="\b";break;case "f":str+="\f";break;case "v":str+="\x0B";break;default:isOctalDigit(ch$jscomp$1)?(code="01234567".indexOf(ch$jscomp$1),0!==code&&(ch$jscomp$0=!0),index$jscomp$0<length&&isOctalDigit(source[index$jscomp$0])&&(ch$jscomp$0=!0,code=8*code+"01234567".indexOf(source[index$jscomp$0++]),0<="0123".indexOf(ch$jscomp$1)&&index$jscomp$0<length&&isOctalDigit(source[index$jscomp$0])&&(code=8*code+"01234567".indexOf(source[index$jscomp$0++]))),str+=String.fromCharCode(code)):
str+=ch$jscomp$1}else if(isLineTerminator(ch$jscomp$1.charCodeAt(0)))break;else str+=ch$jscomp$1}""!==ch&&throwError({},"Unexpected token %0","ILLEGAL");return{type:8,value:str,octal:ch$jscomp$0,start:id,end:index$jscomp$0}}return 46===ch?isDecimalDigit(source.charCodeAt(index$jscomp$0+1))?scanNumericLiteral():scanPunctuator():isDecimalDigit(ch)?scanNumericLiteral():scanPunctuator()}function lex(){var token=lookahead;index$jscomp$0=token.end;lookahead=advance();index$jscomp$0=token.end;return token}
function finishBinaryExpression(operator,left,right){var node=new ASTNode("||"===operator||"\x26\x26"===operator?"LogicalExpression":"BinaryExpression");node.operator=operator;node.left=left;node.right=right;return node}function finishIdentifier(name){var node=new ASTNode("Identifier");node.name=name;return node}function finishLiteral(token){var node=new ASTNode("Literal");node.value=token.value;node.raw=source.slice(token.start,token.end);token.regex&&("//"===node.raw&&(node.raw="/(?:)/"),node.regex=
token.regex);return node}function finishMemberExpression(accessor,object,property){var node=new ASTNode("MemberExpression");node.computed="["===accessor;node.object=object;node.property=property;node.computed||(property.member=!0);return node}function finishProperty(kind,key,value){var node=new ASTNode("Property");node.key=key;node.value=value;node.kind=kind;return node}function throwError(token,messageFormat){var args=Array.prototype.slice.call(arguments,2),msg=messageFormat.replace(/%(\d)/g,function(whole,
index){assert(index<args.length,"Message reference must be in range");return args[index]});var error=Error(msg);error.index=index$jscomp$0;error.description=msg;throw error;}function throwUnexpected(token){2===token.type&&throwError(token,"Unexpected end of input");6===token.type&&throwError(token,"Unexpected number");8===token.type&&throwError(token,"Unexpected string");3===token.type&&throwError(token,"Unexpected identifier");4===token.type&&throwError(token,"Unexpected reserved word");throwError(token,
"Unexpected token %0",token.value)}function expect(value){var token=lex();7===token.type&&token.value===value||throwUnexpected(token)}function match(value){return 7===lookahead.type&&lookahead.value===value}function parseObjectPropertyKey(){index$jscomp$0=lookahead.start;var token=lex();return 8===token.type||6===token.type?(token.octal&&throwError(token,"Octal literals are not allowed in strict mode."),finishLiteral(token)):finishIdentifier(token.value)}function parsePrimaryExpression(){if(match("(")){expect("(");
var token=parseExpression();expect(")");return token}if(match("[")){token=[];index$jscomp$0=lookahead.start;for(expect("[");!match("]");)match(",")?(lex(),token.push(null)):(token.push(parseConditionalExpression()),match("]")||expect(","));lex();var JSCompiler_object_inline_value_5964=new ASTNode("ArrayExpression");JSCompiler_object_inline_value_5964.elements=token;return JSCompiler_object_inline_value_5964}if(match("{")){token=[];JSCompiler_object_inline_value_5964={};var JSCompiler_object_inline_literal_5965=
String;index$jscomp$0=lookahead.start;for(expect("{");!match("}");){index$jscomp$0=lookahead.start;var JSCompiler_object_inline_value_5966=lookahead;if(3===JSCompiler_object_inline_value_5966.type){var JSCompiler_object_inline_literal_5967=parseObjectPropertyKey();expect(":");JSCompiler_object_inline_value_5966=parseConditionalExpression();JSCompiler_object_inline_value_5966=finishProperty("init",JSCompiler_object_inline_literal_5967,JSCompiler_object_inline_value_5966)}else 2===JSCompiler_object_inline_value_5966.type||
7===JSCompiler_object_inline_value_5966.type?(throwUnexpected(JSCompiler_object_inline_value_5966),JSCompiler_object_inline_value_5966=void 0):(JSCompiler_object_inline_literal_5967=parseObjectPropertyKey(),expect(":"),JSCompiler_object_inline_value_5966=parseConditionalExpression(),JSCompiler_object_inline_value_5966=finishProperty("init",JSCompiler_object_inline_literal_5967,JSCompiler_object_inline_value_5966));JSCompiler_object_inline_literal_5967="Identifier"===JSCompiler_object_inline_value_5966.key.type?
JSCompiler_object_inline_value_5966.key.name:JSCompiler_object_inline_literal_5965(JSCompiler_object_inline_value_5966.key.value);JSCompiler_object_inline_literal_5967="$"+JSCompiler_object_inline_literal_5967;Object.prototype.hasOwnProperty.call(JSCompiler_object_inline_value_5964,JSCompiler_object_inline_literal_5967)?throwError({},"Duplicate data property in object literal not allowed in strict mode"):JSCompiler_object_inline_value_5964[JSCompiler_object_inline_literal_5967]=!0;token.push(JSCompiler_object_inline_value_5966);
match("}")||expect(",")}expect("}");JSCompiler_object_inline_value_5964=new ASTNode("ObjectExpression");JSCompiler_object_inline_value_5964.properties=token;return JSCompiler_object_inline_value_5964}JSCompiler_object_inline_value_5964=lookahead.type;index$jscomp$0=lookahead.start;if(3===JSCompiler_object_inline_value_5964||legalKeywords[lookahead.value])token=finishIdentifier(lex().value);else if(8===JSCompiler_object_inline_value_5964||6===JSCompiler_object_inline_value_5964)lookahead.octal&&throwError(lookahead,
"Octal literals are not allowed in strict mode."),token=finishLiteral(lex());else{if(4===JSCompiler_object_inline_value_5964)throw Error("Disabled.");if(1===JSCompiler_object_inline_value_5964)token=lex(),token.value="true"===token.value,token=finishLiteral(token);else if(5===JSCompiler_object_inline_value_5964)token=lex(),token.value=null,token=finishLiteral(token);else if(match("/")||match("/\x3d")){var value;lookahead=null;skipComment();token=index$jscomp$0;JSCompiler_object_inline_value_5964=
source[index$jscomp$0];assert("/"===JSCompiler_object_inline_value_5964,"Regular expression literal must start with a slash");JSCompiler_object_inline_literal_5965=source[index$jscomp$0++];for(JSCompiler_object_inline_literal_5967=JSCompiler_object_inline_value_5966=!1;index$jscomp$0<length;)if(JSCompiler_object_inline_value_5964=source[index$jscomp$0++],JSCompiler_object_inline_literal_5965+=JSCompiler_object_inline_value_5964,"\\"===JSCompiler_object_inline_value_5964)JSCompiler_object_inline_value_5964=
source[index$jscomp$0++],isLineTerminator(JSCompiler_object_inline_value_5964.charCodeAt(0))&&throwError({},"Invalid regular expression: missing /"),JSCompiler_object_inline_literal_5965+=JSCompiler_object_inline_value_5964;else if(isLineTerminator(JSCompiler_object_inline_value_5964.charCodeAt(0)))throwError({},"Invalid regular expression: missing /");else if(JSCompiler_object_inline_value_5966)"]"===JSCompiler_object_inline_value_5964&&(JSCompiler_object_inline_value_5966=!1);else if("/"===JSCompiler_object_inline_value_5964){JSCompiler_object_inline_literal_5967=
!0;break}else"["===JSCompiler_object_inline_value_5964&&(JSCompiler_object_inline_value_5966=!0);JSCompiler_object_inline_literal_5967||throwError({},"Invalid regular expression: missing /");JSCompiler_object_inline_value_5964=JSCompiler_object_inline_literal_5965.substr(1,JSCompiler_object_inline_literal_5965.length-2);for(value=JSCompiler_object_inline_literal_5967="";index$jscomp$0<length;){JSCompiler_object_inline_value_5966=source[index$jscomp$0];if(!isIdentifierPart(JSCompiler_object_inline_value_5966.charCodeAt(0)))break;
++index$jscomp$0;"\\"===JSCompiler_object_inline_value_5966&&index$jscomp$0<length?throwError({},"Unexpected token %0","ILLEGAL"):(value+=JSCompiler_object_inline_value_5966,JSCompiler_object_inline_literal_5967+=JSCompiler_object_inline_value_5966)}0<=value.search(/[^gimuy]/g)&&throwError({},"Invalid regular expression",value);JSCompiler_object_inline_value_5966=value;value=testRegExp(JSCompiler_object_inline_value_5964,JSCompiler_object_inline_value_5966);token=finishLiteral({literal:JSCompiler_object_inline_literal_5965+
JSCompiler_object_inline_literal_5967,value:value,regex:{pattern:JSCompiler_object_inline_value_5964,flags:JSCompiler_object_inline_value_5966},start:token,end:index$jscomp$0});JSCompiler_object_inline_value_5964=index$jscomp$0;lookahead=advance();index$jscomp$0=JSCompiler_object_inline_value_5964}else throwUnexpected(lex())}return token}function parsePostfixExpression(){var JSCompiler_inline_result;for(JSCompiler_inline_result=parsePrimaryExpression();;)if(match(".")){expect(".");index$jscomp$0=
lookahead.start;var args=lex();3===args.type||4===args.type||1===args.type||5===args.type||throwUnexpected(args);args=finishIdentifier(args.value);JSCompiler_inline_result=finishMemberExpression(".",JSCompiler_inline_result,args)}else if(match("(")){args=[];expect("(");if(!match(")"))for(;index$jscomp$0<length;){args.push(parseConditionalExpression());if(match(")"))break;expect(",")}expect(")");var node=new ASTNode("CallExpression");node.callee=JSCompiler_inline_result;node.arguments=args;JSCompiler_inline_result=
node}else if(match("["))expect("["),args=parseExpression(),expect("]"),JSCompiler_inline_result=finishMemberExpression("[",JSCompiler_inline_result,args);else break;if(7===lookahead.type&&(match("++")||match("--")))throw Error("Disabled.");return JSCompiler_inline_result}function parseUnaryExpression(){if(7!==lookahead.type&&4!==lookahead.type)var expr=parsePostfixExpression();else{if(match("++")||match("--"))throw Error("Disabled.");if(match("+")||match("-")||match("~")||match("!")){var token=lex();
expr=parseUnaryExpression();token=token.value;var node=new ASTNode("UnaryExpression");node.operator=token;node.argument=expr;node.prefix=!0;expr=node}else{if(4===lookahead.type&&"delete"===lookahead.value||4===lookahead.type&&"void"===lookahead.value||4===lookahead.type&&"typeof"===lookahead.value)throw Error("Disabled.");expr=parsePostfixExpression()}}return expr}function binaryPrecedence(token){var prec=0;if(7!==token.type&&4!==token.type)return 0;switch(token.value){case "||":prec=1;break;case "\x26\x26":prec=
2;break;case "|":prec=3;break;case "^":prec=4;break;case "\x26":prec=5;break;case "\x3d\x3d":case "!\x3d":case "\x3d\x3d\x3d":case "!\x3d\x3d":prec=6;break;case "\x3c":case "\x3e":case "\x3c\x3d":case "\x3e\x3d":case "instanceof":case "in":prec=7;break;case "\x3c\x3c":case "\x3e\x3e":case "\x3e\x3e\x3e":prec=8;break;case "+":case "-":prec=9;break;case "*":case "/":case "%":prec=11}return prec}function parseConditionalExpression(){var consequent=lookahead;var expr=parseUnaryExpression();var token=
lookahead;var alternate=binaryPrecedence(token);if(0===alternate)var expr$jscomp$0=expr;else{token.prec=alternate;lex();consequent=[consequent,lookahead];var right=parseUnaryExpression();for(expr$jscomp$0=[expr,token,right];0<(alternate=binaryPrecedence(lookahead));){for(;2<expr$jscomp$0.length&&alternate<=expr$jscomp$0[expr$jscomp$0.length-2].prec;)right=expr$jscomp$0.pop(),token=expr$jscomp$0.pop().value,expr=expr$jscomp$0.pop(),consequent.pop(),expr=finishBinaryExpression(token,expr,right),expr$jscomp$0.push(expr);
token=lex();token.prec=alternate;expr$jscomp$0.push(token);consequent.push(lookahead);expr=parseUnaryExpression();expr$jscomp$0.push(expr)}alternate=expr$jscomp$0.length-1;expr=expr$jscomp$0[alternate];for(consequent.pop();1<alternate;)consequent.pop(),expr=finishBinaryExpression(expr$jscomp$0[alternate-1].value,expr$jscomp$0[alternate-2],expr),alternate-=2;expr$jscomp$0=expr}match("?")&&(lex(),consequent=parseConditionalExpression(),expect(":"),alternate=parseConditionalExpression(),expr=new ASTNode("ConditionalExpression"),
expr.test=expr$jscomp$0,expr.consequent=consequent,expr.alternate=alternate,expr$jscomp$0=expr);return expr$jscomp$0}function parseExpression(){var expr=parseConditionalExpression();if(match(","))throw Error("Disabled.");return expr}function Functions(codegen){function fn(name,cast,type){return function(args){var obj=codegen(args[0]);cast&&(obj=cast+"("+obj+")",0===cast.lastIndexOf("new ",0)&&(obj="("+obj+")"));return obj+"."+name+(0>type?"":0===type?"()":"("+args.slice(1).map(codegen).join(",")+
")")}}return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(args){3>args.length&&vegaUtil.error("Missing arguments to clamp function.");3<args.length&&vegaUtil.error("Too many arguments to clamp function.");
args=args.map(codegen);return"Math.max("+args[1]+", Math.min("+args[2]+","+args[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:"new Date",date:fn("getDate","new Date",0),day:fn("getDay","new Date",0),year:fn("getFullYear","new Date",0),month:fn("getMonth","new Date",0),hours:fn("getHours","new Date",0),minutes:fn("getMinutes","new Date",0),seconds:fn("getSeconds","new Date",0),milliseconds:fn("getMilliseconds","new Date",0),time:fn("getTime","new Date",0),timezoneoffset:fn("getTimezoneOffset","new Date",
0),utcdate:fn("getUTCDate","new Date",0),utcday:fn("getUTCDay","new Date",0),utcyear:fn("getUTCFullYear","new Date",0),utcmonth:fn("getUTCMonth","new Date",0),utchours:fn("getUTCHours","new Date",0),utcminutes:fn("getUTCMinutes","new Date",0),utcseconds:fn("getUTCSeconds","new Date",0),utcmilliseconds:fn("getUTCMilliseconds","new Date",0),length:fn("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:fn("toUpperCase","String",0),lower:fn("toLowerCase","String",0),substring:fn("substring",
"String"),split:fn("split","String"),trim:fn("trim","String",0),regexp:"RegExp",test:fn("test","RegExp"),if:function(args){3>args.length&&vegaUtil.error("Missing arguments to if function.");3<args.length&&vegaUtil.error("Too many arguments to if function.");args=args.map(codegen);return"("+args[0]+"?"+args[1]+":"+args[2]+")"}}}ASTNode.prototype.visit=function(visitor){var n;if(visitor(this))return 1;var c=children(this);var i=0;for(n=c.length;i<n;++i)if(c[i].visit(visitor))return 1};var source,index$jscomp$0,
length,lookahead,RegexNonAsciiIdentifierStart=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B2\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA78E\uA790-\uA7AD\uA7B0\uA7B1\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB5F\uAB64\uAB65\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/,
RegexNonAsciiIdentifierPart=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0-\u08B2\u08E4-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58\u0C59\u0C60-\u0C63\u0C66-\u0C6F\u0C81-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D01-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D57\u0D60-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1CD0-\u1CD2\u1CD4-\u1CF6\u1CF8\u1CF9\u1D00-\u1DF5\u1DFC-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u2E2F\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099\u309A\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA69D\uA69F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA78E\uA790-\uA7AD\uA7B0\uA7B1\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C4\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB5F\uAB64\uAB65\uABC0-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2D\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/,
keywords={"if":1,"in":1,"do":1,"var":1,"for":1,"new":1,"try":1,let:1,"this":1,"else":1,"case":1,"void":1,"with":1,"enum":1,"while":1,"break":1,"catch":1,"throw":1,"const":1,yield:1,"class":1,"super":1,"return":1,"typeof":1,"delete":1,"switch":1,"export":1,"import":1,"public":1,"static":1,"default":1,"finally":1,"extends":1,"package":1,"private":1,"function":1,"continue":1,"debugger":1,"interface":1,"protected":1,"instanceof":1,"implements":1},legalKeywords={"if":1},Constants={NaN:"NaN",E:"Math.E",
LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};exports.ASTNode=ASTNode;exports.ArrayExpression="ArrayExpression";exports.BinaryExpression="BinaryExpression";exports.CallExpression="CallExpression";exports.ConditionalExpression="ConditionalExpression";exports.Identifier="Identifier";exports.Literal="Literal";exports.LogicalExpression="LogicalExpression";exports.MemberExpression=
"MemberExpression";exports.ObjectExpression="ObjectExpression";exports.Property="Property";exports.RawCode="RawCode";exports.UnaryExpression="UnaryExpression";exports.codegenExpression=function(opt){function visit(ast){if(vegaUtil.isString(ast))return ast;var generator=Generators[ast.type];null==generator&&vegaUtil.error("Unsupported type: "+ast.type);return generator(ast)}function codegen(ast){ast={code:visit(ast),globals:Object.keys(globals),fields:Object.keys(fields)};globals={};fields={};return ast}
opt=opt||{};var allowed=opt.allowed?vegaUtil.toSet(opt.allowed):{},forbidden=opt.forbidden?vegaUtil.toSet(opt.forbidden):{},constants=opt.constants||Constants,functions=(opt.functions||Functions)(visit),globalvar=opt.globalvar,fieldvar=opt.fieldvar,outputGlobal=vegaUtil.isFunction(globalvar)?globalvar:function(id){return globalvar+'["'+id+'"]'},globals={},fields={},memberDepth=0,Generators={Literal:function(n){return n.raw},Identifier:function(n){n=n.name;if(0<memberDepth)return n;if(vegaUtil.hasOwnProperty(forbidden,
n))return vegaUtil.error("Illegal identifier: "+n);if(vegaUtil.hasOwnProperty(constants,n))return constants[n];if(vegaUtil.hasOwnProperty(allowed,n))return n;globals[n]=1;return outputGlobal(n)},MemberExpression:function(n){var d=!n.computed,o=visit(n.object);d&&(memberDepth+=1);n=visit(n.property);if(o===fieldvar){var JSCompiler_temp_const=fields;var JSCompiler_inline_result=(JSCompiler_inline_result=n&&n.length-1)&&('"'===n[0]&&'"'===n[JSCompiler_inline_result]||"'"===n[0]&&"'"===n[JSCompiler_inline_result])?
n.slice(1,-1):n;JSCompiler_temp_const[JSCompiler_inline_result]=1}d&&--memberDepth;return o+(d?"."+n:"["+n+"]")},CallExpression:function(n){"Identifier"!==n.callee.type&&vegaUtil.error("Illegal callee type: "+n.callee.type);var callee=n.callee.name;n=n.arguments;var fn=vegaUtil.hasOwnProperty(functions,callee)&&functions[callee];fn||vegaUtil.error("Unrecognized function: "+callee);return vegaUtil.isFunction(fn)?fn(n):fn+"("+n.map(visit).join(",")+")"},ArrayExpression:function(n){return"["+n.elements.map(visit).join(",")+
"]"},BinaryExpression:function(n){return"("+visit(n.left)+" "+n.operator+" "+visit(n.right)+")"},UnaryExpression:function(n){return"("+n.operator+visit(n.argument)+")"},ConditionalExpression:function(n){return"("+visit(n.test)+"?"+visit(n.consequent)+":"+visit(n.alternate)+")"},LogicalExpression:function(n){return"("+visit(n.left)+n.operator+visit(n.right)+")"},ObjectExpression:function(n){return"{"+n.properties.map(visit).join(",")+"}"},Property:function(n){memberDepth+=1;var k=visit(n.key);--memberDepth;
return k+":"+visit(n.value)}};codegen.functions=functions;codegen.constants=constants;return codegen};exports.constants=Constants;exports.functions=Functions;exports.parseExpression=function(code){source=code;index$jscomp$0=0;length=source.length;lookahead=null;code=index$jscomp$0;lookahead=advance();index$jscomp$0=code;code=parseExpression();if(2!==lookahead.type)throw Error("Unexpect token after expression.");return code};Object.defineProperty(exports,"__esModule",{value:!0})})}
//# sourceMappingURL=module$node_modules$vega_expression$build$vega_expression.js.map
