{
"version":3,
"file":"com.cognitect.transit.impl.reader.js",
"lineCount":24,
"mappings":"AAcAA,IAAA,CAAKC,OAAL,CAAa,mCAAb,CAAA;AACAD,IAAA,CAAKE,OAAL,CAAa,oCAAb,CAAA;AACAF,IAAA,CAAKE,OAAL,CAAa,+BAAb,CAAA;AAEAF,IAAA,CAAKG,KAAL,CAAW,QAAS,EAAG;AAEnB,MAAIC,SAAUC,GAAVD,CAAcE,SAAdF,CAAwBG,OAAxBH,CAAgCI,IAAhCJ,CAAqCA,MAAzC,EACIK,UAAUJ,GAAVI,CAAcH,SAAdG,CAAwBF,OAAxBE,CAAgCD,IAAhCC,CAAqCA,OADzC,EAEIC,UAAUL,GAAVK,CAAcJ,SAAdI,CAAwBH,OAAxBG,CAAgCA,OAFpC;AAQAN,QAAA,CAAOO,gBAAP,GAA0BC,QAASC,yBAAwB,CAACC,IAAD,CAAO;AAC9D,QAAA,CAAKL,OAAL,GAAe,IAAIA,OAAJ,CAAYM,OAAZ,CAAoBD,IAApB,CAAf;AAD8D,GAAlE;AASAV,QAAA,CAAOO,gBAAP,CAAwBK,SAAxB,CAAkCC,SAAlC,GAA8CC,QAAS,CAACC,GAAD,EAAMC,KAAN,CAAa;AAChE,WAAO,IAAA,CAAKX,OAAL,CAAaY,MAAb,CAAoBC,IAAA,CAAKC,KAAL,CAAWJ,GAAX,CAApB,EAAqCC,KAArC,CAAP;AADgE,GAApE;AAUAhB,QAAA,CAAOoB,MAAP,GAAgBC,QAASC,eAAc,CAACC,YAAD,EAAeC,OAAf,CAAwB;AAC3D,QAAA,CAAKD,YAAL,GAAoBA,YAApB;AACA,QAAA,CAAKC,OAAL,GAAeA,OAAf,IAA0B,EAA1B;AACA,QAAA,CAAKR,KAAL,GAAa,IAAA,CAAKQ,OAAL,CAAa,OAAb,CAAA,GAAwB,IAAA,CAAKA,OAAL,CAAa,OAAb,CAAxB,GAAgD,IAAIlB,OAAJ,CAAYmB,SAAzE;AAH2D,GAA/D;AAUAzB,QAAA,CAAOoB,MAAP,CAAcR,SAAd,CAAwBc,IAAxB,GAA+BC,QAAS,CAACZ,GAAD,CAAM;AAC1C,QAAIa,MAAM,IAAA,CAAKL,YAAL,CAAkBV,SAAlB,CAA4BE,GAA5B,EAAiC,IAAjC,CAAsCC,KAAtC,CAAV;AACA,QAAA,CAAKA,KAAL,CAAWa,KAAX,EAAA;AACA,WAAOD,GAAP;AAH0C,GAA9C;AAKA5B,QAAA,CAAOoB,MAAP,CAAcR,SAAd,CAAwB,MAAxB,CAAA,GAAkCZ,MAAlC,CAAyCoB,MAAzC,CAAgDR,SAAhD,CAA0Dc,IAA1D;AA5CmB,CAAvB,CAAA;;",
"sources":["com/cognitect/transit/impl/reader.js"],
"sourcesContent":["// Copyright 2014 Cognitect. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS-IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\ngoog.provide(\"com.cognitect.transit.impl.reader\");\ngoog.require(\"com.cognitect.transit.impl.decoder\");\ngoog.require(\"com.cognitect.transit.caching\");\n\ngoog.scope(function () {\n\n    var reader  = com.cognitect.transit.impl.reader,\n        decoder = com.cognitect.transit.impl.decoder,\n        caching = com.cognitect.transit.caching;\n\n    /**\n     * A JSON unmarshaller\n     * @constructor\n     */\n    reader.JSONUnmarshaller = function Transit$JSONUnmarshaller(opts) {\n        this.decoder = new decoder.Decoder(opts);\n    };\n\n    /**\n     * @param {string} str a JSON string\n     * @param {caching.ReadCache} cache a read cache\n     * @returns {*}\n     */\n    reader.JSONUnmarshaller.prototype.unmarshal = function (str, cache) {\n        return this.decoder.decode(JSON.parse(str), cache);\n    };\n\n    /**\n     * A transit reader\n     * @constructor\n     * @param {reader.JSONUnmarshaller} unmarshaller\n     * @param {Object=} options\n     */\n    reader.Reader = function Transit$Reader(unmarshaller, options) {\n        this.unmarshaller = unmarshaller;\n        this.options = options || {};\n        this.cache = this.options[\"cache\"] ? this.options[\"cache\"] : new caching.ReadCache();\n    };\n\n    /**\n     * @param {string} str a string to be read\n     * @returns {*}\n     */\n    reader.Reader.prototype.read = function (str) {\n        var ret = this.unmarshaller.unmarshal(str, this.cache)\n        this.cache.clear();\n        return ret;\n    };\n    reader.Reader.prototype[\"read\"] = reader.Reader.prototype.read;\n\n});\n"],
"names":["goog","provide","require","scope","reader","com","cognitect","transit","impl","decoder","caching","JSONUnmarshaller","reader.JSONUnmarshaller","Transit$JSONUnmarshaller","opts","Decoder","prototype","unmarshal","reader.JSONUnmarshaller.prototype.unmarshal","str","cache","decode","JSON","parse","Reader","reader.Reader","Transit$Reader","unmarshaller","options","ReadCache","read","reader.Reader.prototype.read","ret","clear"]
}
