{
"version":3,
"file":"module$node_modules$react_vega$lib$VegaEmbed.js",
"lineCount":11,
"mappings":"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",
"sources":["node_modules/react-vega/lib/VegaEmbed.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$react_vega$lib$VegaEmbed\"] = function(global,require,module,exports) {\n\"use strict\";\n\nexports.__esModule = true;\nexports.default = void 0;\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _vegaEmbed = _interopRequireDefault(require(\"vega-embed\"));\n\nvar _shallowEqual = _interopRequireDefault(require(\"./utils/shallowEqual\"));\n\nvar _getUniqueFieldNames = _interopRequireDefault(require(\"./utils/getUniqueFieldNames\"));\n\nvar _constants = require(\"./constants\");\n\nvar _addSignalListenersToView = _interopRequireDefault(require(\"./utils/addSignalListenersToView\"));\n\nvar _computeSpecChanges = _interopRequireDefault(require(\"./utils/computeSpecChanges\"));\n\nvar _removeSignalListenersFromView = _interopRequireDefault(require(\"./utils/removeSignalListenersFromView\"));\n\nvar _combineSpecWithDimension = _interopRequireDefault(require(\"./utils/combineSpecWithDimension\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nclass VegaEmbed extends _react.default.PureComponent {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"containerRef\", /*#__PURE__*/_react.default.createRef());\n\n    _defineProperty(this, \"resultPromise\", void 0);\n\n    _defineProperty(this, \"handleError\", error => {\n      const {\n        onError = _constants.NOOP\n      } = this.props;\n      onError(error); // eslint-disable-next-line no-console\n\n      console.warn(error);\n      return undefined;\n    });\n\n    _defineProperty(this, \"modifyView\", action => {\n      if (this.resultPromise) {\n        this.resultPromise.then(result => {\n          if (result) {\n            action(result.view);\n          }\n\n          return true;\n        }).catch(this.handleError);\n      }\n    });\n  }\n\n  componentDidMount() {\n    this.createView();\n  }\n\n  componentDidUpdate(prevProps) {\n    const fieldSet = (0, _getUniqueFieldNames.default)([this.props, prevProps]);\n    fieldSet.delete('className');\n    fieldSet.delete('signalListeners');\n    fieldSet.delete('spec');\n    fieldSet.delete('style');\n    fieldSet.delete('width');\n    fieldSet.delete('height'); // Only create a new view if necessary\n\n    if (Array.from(fieldSet).some(f => this.props[f] !== prevProps[f])) {\n      this.clearView();\n      this.createView();\n    } else {\n      const specChanges = (0, _computeSpecChanges.default)((0, _combineSpecWithDimension.default)(this.props), (0, _combineSpecWithDimension.default)(prevProps));\n      const {\n        signalListeners: newSignalListeners\n      } = this.props;\n      const {\n        signalListeners: oldSignalListeners\n      } = prevProps;\n\n      if (specChanges) {\n        if (specChanges.isExpensive) {\n          this.clearView();\n          this.createView();\n        } else {\n          const areSignalListenersChanged = !(0, _shallowEqual.default)(newSignalListeners, oldSignalListeners);\n          this.modifyView(view => {\n            if (specChanges.width !== false) {\n              view.width(specChanges.width);\n            }\n\n            if (specChanges.height !== false) {\n              view.height(specChanges.height);\n            }\n\n            if (areSignalListenersChanged) {\n              if (oldSignalListeners) {\n                (0, _removeSignalListenersFromView.default)(view, oldSignalListeners);\n              }\n\n              if (newSignalListeners) {\n                (0, _addSignalListenersToView.default)(view, newSignalListeners);\n              }\n            }\n\n            view.run();\n          });\n        }\n      } else if (!(0, _shallowEqual.default)(newSignalListeners, oldSignalListeners)) {\n        this.modifyView(view => {\n          if (oldSignalListeners) {\n            (0, _removeSignalListenersFromView.default)(view, oldSignalListeners);\n          }\n\n          if (newSignalListeners) {\n            (0, _addSignalListenersToView.default)(view, newSignalListeners);\n          }\n\n          view.run();\n        });\n      }\n    }\n  }\n\n  componentWillUnmount() {\n    this.clearView();\n  }\n\n  createView() {\n    const {\n      spec,\n      onNewView,\n      signalListeners = {},\n      width,\n      height,\n      ...options\n    } = this.props;\n\n    if (this.containerRef.current) {\n      const finalSpec = (0, _combineSpecWithDimension.default)(this.props);\n      this.resultPromise = (0, _vegaEmbed.default)(this.containerRef.current, finalSpec, options).then(result => {\n        if (result) {\n          const {\n            view\n          } = result;\n\n          if ((0, _addSignalListenersToView.default)(view, signalListeners)) {\n            view.run();\n          }\n        }\n\n        return result;\n      }).catch(this.handleError);\n\n      if (onNewView) {\n        this.modifyView(onNewView);\n      }\n    }\n  }\n\n  clearView() {\n    if (this.resultPromise) {\n      this.resultPromise.then(result => {\n        if (result) {\n          result.finalize();\n        }\n      }).catch(this.handleError);\n    }\n\n    this.resultPromise = undefined;\n    return this;\n  }\n\n  render() {\n    const {\n      className,\n      style\n    } = this.props; // Create the container Vega draws inside\n\n    return /*#__PURE__*/_react.default.createElement(\"div\", {\n      ref: this.containerRef,\n      className: className,\n      style: style\n    });\n  }\n\n}\n\nexports.default = VegaEmbed;\n\n_defineProperty(VegaEmbed, \"propTypes\", {\n  className: _propTypes.default.string,\n  onError: _propTypes.default.func\n});\n};"],
"names":["shadow$provide","global","require","module","exports","_interopRequireDefault","obj","__esModule","default","_defineProperty","key","value","Object","defineProperty","enumerable","configurable","writable","_propTypes","_react","_vegaEmbed","_shallowEqual","_getUniqueFieldNames","_constants","_addSignalListenersToView","_computeSpecChanges","_removeSignalListenersFromView","_combineSpecWithDimension","VegaEmbed","constructor","args","createRef","error","props","onError","NOOP","console","warn","action","resultPromise","then","result","view","catch","handleError","PureComponent","componentDidMount","createView","componentDidUpdate","prevProps","fieldSet","delete","Array","from","some","f","clearView","specChanges","newSignalListeners","oldSignalListeners","isExpensive","areSignalListenersChanged","modifyView","width","height","run","componentWillUnmount","onNewView","signalListeners","containerRef","current","finalSpec","options","finalize","undefined","render","createElement","ref","className","style","string","func"]
}
