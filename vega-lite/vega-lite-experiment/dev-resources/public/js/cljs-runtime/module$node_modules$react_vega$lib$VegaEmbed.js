shadow$provide.module$node_modules$react_vega$lib$VegaEmbed=function(global,require,module,exports){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defineProperty(obj,key,value){key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value;return obj}exports.__esModule=!0;exports.default=void 0;global=_interopRequireDefault(require("module$node_modules$prop_types$index"));var _react=_interopRequireDefault(require("module$node_modules$react$index")),
_vegaEmbed=_interopRequireDefault(require("module$node_modules$vega_embed$build$vega_embed")),_shallowEqual=_interopRequireDefault(require("module$node_modules$react_vega$lib$utils$shallowEqual")),_getUniqueFieldNames=_interopRequireDefault(require("module$node_modules$react_vega$lib$utils$getUniqueFieldNames")),_constants=require("module$node_modules$react_vega$lib$constants"),_addSignalListenersToView=_interopRequireDefault(require("module$node_modules$react_vega$lib$utils$addSignalListenersToView")),
_computeSpecChanges=_interopRequireDefault(require("module$node_modules$react_vega$lib$utils$computeSpecChanges")),_removeSignalListenersFromView=_interopRequireDefault(require("module$node_modules$react_vega$lib$utils$removeSignalListenersFromView")),_combineSpecWithDimension=_interopRequireDefault(require("module$node_modules$react_vega$lib$utils$combineSpecWithDimension"));require=function(args){for(var $jscomp$restParams=[],$jscomp$restIndex=0;$jscomp$restIndex<arguments.length;++$jscomp$restIndex)$jscomp$restParams[$jscomp$restIndex-
0]=arguments[$jscomp$restIndex];var $jscomp$super$this=_react.default.PureComponent.apply(this,[].concat($jscomp.arrayFromIterable($jscomp$restParams)))||this;_defineProperty($jscomp$super$this,"containerRef",_react.default.createRef());_defineProperty($jscomp$super$this,"resultPromise",void 0);_defineProperty($jscomp$super$this,"handleError",function(error){var $jscomp$destructuring$var621=$jscomp$super$this.props;(void 0===$jscomp$destructuring$var621.onError?_constants.NOOP:$jscomp$destructuring$var621.onError)(error);
console.warn(error)});_defineProperty($jscomp$super$this,"modifyView",function(action){$jscomp$super$this.resultPromise&&$jscomp$super$this.resultPromise.then(function(result){result&&action(result.view);return!0}).catch($jscomp$super$this.handleError)});return $jscomp$super$this};$jscomp.inherits(require,_react.default.PureComponent);require.prototype.componentDidMount=function(){this.createView()};require.prototype.componentDidUpdate=function(prevProps){var $jscomp$this=this,fieldSet=(0,_getUniqueFieldNames.default)([this.props,
prevProps]);fieldSet.delete("className");fieldSet.delete("signalListeners");fieldSet.delete("spec");fieldSet.delete("style");fieldSet.delete("width");fieldSet.delete("height");if(Array.from(fieldSet).some(function(f){return $jscomp$this.props[f]!==prevProps[f]}))this.clearView(),this.createView();else{var specChanges=(0,_computeSpecChanges.default)((0,_combineSpecWithDimension.default)(this.props),(0,_combineSpecWithDimension.default)(prevProps)),newSignalListeners=this.props.signalListeners,oldSignalListeners=
prevProps.signalListeners;if(specChanges)if(specChanges.isExpensive)this.clearView(),this.createView();else{var areSignalListenersChanged=!(0,_shallowEqual.default)(newSignalListeners,oldSignalListeners);this.modifyView(function(view){!1!==specChanges.width&&view.width(specChanges.width);!1!==specChanges.height&&view.height(specChanges.height);areSignalListenersChanged&&(oldSignalListeners&&(0,_removeSignalListenersFromView.default)(view,oldSignalListeners),newSignalListeners&&(0,_addSignalListenersToView.default)(view,
newSignalListeners));view.run()})}else(0,_shallowEqual.default)(newSignalListeners,oldSignalListeners)||this.modifyView(function(view){oldSignalListeners&&(0,_removeSignalListenersFromView.default)(view,oldSignalListeners);newSignalListeners&&(0,_addSignalListenersToView.default)(view,newSignalListeners);view.run()})}};require.prototype.componentWillUnmount=function(){this.clearView()};require.prototype.createView=function(){var $jscomp$destructuring$var624=this.props,$jscomp$destructuring$var625=
Object.assign({},$jscomp$destructuring$var624),onNewView=$jscomp$destructuring$var624.onNewView,signalListeners=void 0===$jscomp$destructuring$var624.signalListeners?{}:$jscomp$destructuring$var624.signalListeners;$jscomp$destructuring$var624=(delete $jscomp$destructuring$var625.spec,delete $jscomp$destructuring$var625.onNewView,delete $jscomp$destructuring$var625.signalListeners,delete $jscomp$destructuring$var625.width,delete $jscomp$destructuring$var625.height,$jscomp$destructuring$var625);this.containerRef.current&&
($jscomp$destructuring$var625=(0,_combineSpecWithDimension.default)(this.props),this.resultPromise=(0,_vegaEmbed.default)(this.containerRef.current,$jscomp$destructuring$var625,$jscomp$destructuring$var624).then(function(result){if(result){var view=result.view;(0,_addSignalListenersToView.default)(view,signalListeners)&&view.run()}return result}).catch(this.handleError),onNewView&&this.modifyView(onNewView))};require.prototype.clearView=function(){this.resultPromise&&this.resultPromise.then(function(result){result&&
result.finalize()}).catch(this.handleError);this.resultPromise=void 0;return this};require.prototype.render=function(){var $jscomp$destructuring$var627=this.props;return _react.default.createElement("div",{ref:this.containerRef,className:$jscomp$destructuring$var627.className,style:$jscomp$destructuring$var627.style})};exports.default=require;_defineProperty(require,"propTypes",{className:global.default.string,onError:global.default.func})}
//# sourceMappingURL=module$node_modules$react_vega$lib$VegaEmbed.js.map
