{
"version":3,
"file":"goog.dom.safe.js",
"lineCount":242,
"mappings":"AAuCAA,IAAA,CAAKC,OAAL,CAAa,eAAb,CAAA;AACAD,IAAA,CAAKC,OAAL,CAAa,0CAAb,CAAA;AAEAD,IAAA,CAAKE,OAAL,CAAa,cAAb,CAAA;AACAF,IAAA,CAAKE,OAAL,CAAa,kBAAb,CAAA;AACAF,IAAA,CAAKE,OAAL,CAAa,gBAAb,CAAA;AACAF,IAAA,CAAKE,OAAL,CAAa,oBAAb,CAAA;AACAF,IAAA,CAAKE,OAAL,CAAa,sBAAb,CAAA;AACAF,IAAA,CAAKE,OAAL,CAAa,qBAAb,CAAA;AACAF,IAAA,CAAKE,OAAL,CAAa,mBAAb,CAAA;AACAF,IAAA,CAAKE,OAAL,CAAa,8BAAb,CAAA;AACAF,IAAA,CAAKE,OAAL,CAAa,gCAAb,CAAA;AACAF,IAAA,CAAKE,OAAL,CAAa,mBAAb,CAAA;AACAF,IAAA,CAAKE,OAAL,CAAa,sBAAb,CAAA;AAIAF,IAAA,CAAKG,GAAL,CAASC,IAAT,CAAcC,0BAAd,GAA2C,CACzCC,WAAY,YAD6B,EAEzCC,SAAU,UAF+B,EAGzCC,YAAa,aAH4B,EAIzCC,UAAW,WAJ8B,CAA3C;AAeAT,IAAA,CAAKG,GAAL,CAASC,IAAT,CAAcM,kBAAd,GAAmCC,QAAQ,CAACC,IAAD,EAAOC,QAAP,EAAiBC,IAAjB,CAAuB;AAChEF,MAAA,CAAKG,kBAAL,CAAwBF,QAAxB,EAAkCb,IAAA,CAAKc,IAAL,CAAUE,QAAV,CAAmBC,iBAAnB,CAAqCH,IAArC,CAAlC,CAAA;AADgE,CAAlE;AASAd,IAAA,CAAKG,GAAL,CAASC,IAAT,CAAcc,+BAAd,GAAgD,CAC9C,OAAQ,IADsC,EAE9C,SAAU,IAFoC,EAG9C,QAAS,IAHqC,EAI9C,MAAO,IAJuC,EAK9C,WAAY,IALkC,CAAhD;AA2BAlB,IAAA,CAAKG,GAAL,CAASC,IAAT,CAAce,4BAAd,GACInB,IAAA,CAAKoB,SAAL,CAAeC,gBAAf,CAAgC,QAAQ,EAAG;AAEzC,MAAIrB,IAAJ,CAASsB,KAAT,IAAkB,MAAOC,SAAzB,KAAsC,WAAtC;AACE,WAAO,KAAP;AADF;AAMA,MAAIC,MAAMD,QAAA,CAASE,aAAT,CAAuB,KAAvB,CAAV;AACA,MAAIC,WAAWH,QAAA,CAASE,aAAT,CAAuB,KAAvB,CAAf;AACAC,UAAA,CAASC,WAAT,CAAqBJ,QAAA,CAASE,aAAT,CAAuB,KAAvB,CAArB,CAAA;AACAD,KAAA,CAAIG,WAAJ,CAAgBD,QAAhB,CAAA;AAEA,MAAI1B,IAAJ,CAASsB,KAAT,IAAkB,CAACE,GAAD,CAAKI,UAAvB;AACE,WAAO,KAAP;AADF;AAGA,MAAIC,aAAaL,GAAbK,CAAiBD,UAAjBC,CAA4BD,UAAhC;AACAJ,KAAA,CAAIM,SAAJ,GACI9B,IAAA,CAAKc,IAAL,CAAUE,QAAV,CAAmBC,iBAAnB,CAAqCjB,IAArC,CAA0Cc,IAA1C,CAA+CE,QAA/C,CAAwDe,KAAxD,CADJ;AAEA,SAAO,CAACF,UAAD,CAAYG,aAAnB;AAnByC,CAA3C,CADJ;AA8BAhC,IAAA,CAAKG,GAAL,CAASC,IAAT,CAAc6B,gCAAd,GAAiDC,QAAQ,CAACC,IAAD,EAAOrB,IAAP,CAAa;AAEpE,MAAId,IAAA,CAAKG,GAAL,CAASC,IAAT,CAAce,4BAAd,EAAJ;AACE,WAAOgB,IAAP,CAAYC,SAAZ;AACED,UAAA,CAAKE,WAAL,CAAiBF,IAAjB,CAAsBC,SAAtB,CAAA;AADF;AADF;AAKAD,MAAA,CAAKL,SAAL,GAAiB9B,IAAA,CAAKc,IAAL,CAAUE,QAAV,CAAmBC,iBAAnB,CAAqCH,IAArC,CAAjB;AAPoE,CAAtE;AAkBAd,IAAA,CAAKG,GAAL,CAASC,IAAT,CAAckC,YAAd,GAA6BC,QAAQ,CAACJ,IAAD,EAAOrB,IAAP,CAAa;AAChD,MAAId,IAAJ,CAASwC,OAAT,CAAiBC,cAAjB,CAAiC;AAC/B,QAAIC,UAAUP,IAAA,CAAKO,OAAL,CAAaC,WAAb,EAAd;AACA,QAAI3C,IAAA,CAAKG,GAAL,CAASC,IAAT,CAAcc,+BAAd,CAA8CwB,OAA9C,CAAJ;AACE,YAAM,IAAIE,KAAJ,CACF,8DADE,GAEFT,IAFE,CAEGO,OAFH,GAEa,GAFb,CAAN;AADF;AAF+B;AASjC1C,MAAA,CAAKG,GAAL,CAASC,IAAT,CAAc6B,gCAAd,CAA+CE,IAA/C,EAAqDrB,IAArD,CAAA;AAVgD,CAAlD;AAmBAd,IAAA,CAAKG,GAAL,CAASC,IAAT,CAAcyC,YAAd,GAA6BC,QAAQ,CAACX,IAAD,EAAOrB,IAAP,CAAa;AAChDqB,MAAA,CAAKY,SAAL,GAAiB/C,IAAA,CAAKc,IAAL,CAAUE,QAAV,CAAmBC,iBAAnB,CAAqCH,IAArC,CAAjB;AADgD,CAAlD;AAwBAd,IAAA,CAAKG,GAAL,CAASC,IAAT,CAAc4C,oBAAd,GAAqCC,QAAQ,CAACC,IAAD,EAAOC,GAAP,CAAY;AAEvD,MAAIC,OAAJ;AACA,MAAID,GAAJ,YAAmBnD,IAAnB,CAAwBc,IAAxB,CAA6BuC,OAA7B;AACED,WAAA,GAAUD,GAAV;AADF;AAGEC,WAAA,GAAUpD,IAAA,CAAKc,IAAL,CAAUuC,OAAV,CAAkBC,uBAAlB,CAA0CH,GAA1C,CAAV;AAHF;AAKAnD,MAAA,CAAKG,GAAL,CAASqC,OAAT,CAAiBe,uBAAjB,CAAyCL,IAAzC,CAAA,CAA+CM,MAA/C,GACIxD,IAAA,CAAKc,IAAL,CAAUuC,OAAV,CAAkBI,MAAlB,CAAyBL,OAAzB,CADJ;AARuD,CAAzD;AA+BApD,IAAA,CAAKG,GAAL,CAASC,IAAT,CAAcsD,mBAAd,GAAoCC,QAAQ,CAACC,MAAD,EAAST,GAAT,CAAc;AAExD,MAAIC,OAAJ;AACA,MAAID,GAAJ,YAAmBnD,IAAnB,CAAwBc,IAAxB,CAA6BuC,OAA7B;AACED,WAAA,GAAUD,GAAV;AADF;AAGEC,WAAA,GAAUpD,IAAA,CAAKc,IAAL,CAAUuC,OAAV,CAAkBC,uBAAlB,CAA0CH,GAA1C,CAAV;AAHF;AAKAnD,MAAA,CAAKG,GAAL,CAASqC,OAAT,CAAiBqB,yBAAjB,CAA2CD,MAA3C,CAAA,CAAmDE,UAAnD,GACI9D,IAAA,CAAKc,IAAL,CAAUuC,OAAV,CAAkBI,MAAlB,CAAyBL,OAAzB,CADJ;AARwD,CAA1D;AA8BApD,IAAA,CAAKG,GAAL,CAASC,IAAT,CAAc2D,kBAAd,GAAmCC,QAAQ,CAACC,KAAD,EAAQd,GAAR,CAAa;AAEtD,MAAIC,OAAJ;AACA,MAAID,GAAJ,YAAmBnD,IAAnB,CAAwBc,IAAxB,CAA6BuC,OAA7B;AACED,WAAA,GAAUD,GAAV;AADF;AAGEC,WAAA,GAAUpD,IAAA,CAAKc,IAAL,CAAUuC,OAAV,CAAkBC,uBAAlB,CAA0CH,GAA1C,CAAV;AAHF;AAKAnD,MAAA,CAAKG,GAAL,CAASqC,OAAT,CAAiB0B,wBAAjB,CAA0CD,KAA1C,CAAA,CAAiDH,UAAjD,GACI9D,IAAA,CAAKc,IAAL,CAAUuC,OAAV,CAAkBI,MAAlB,CAAyBL,OAAzB,CADJ;AARsD,CAAxD;AAkBApD,IAAA,CAAKG,GAAL,CAASC,IAAT,CAAc+D,QAAd,GAAyBC,QAAQ,CAACjC,IAAD,EAAOkC,KAAP,CAAc;AAC7ClC,MAAA,CAAKkC,KAAL,CAAWC,OAAX,GAAqBtE,IAAA,CAAKc,IAAL,CAAUyD,SAAV,CAAoBd,MAApB,CAA2BY,KAA3B,CAArB;AAD6C,CAA/C;AAUArE,IAAA,CAAKG,GAAL,CAASC,IAAT,CAAcoE,aAAd,GAA8BC,QAAQ,CAACC,GAAD,EAAM5D,IAAN,CAAY;AAChD4D,KAAA,CAAIC,KAAJ,CAAU3E,IAAA,CAAKc,IAAL,CAAUE,QAAV,CAAmBC,iBAAnB,CAAqCH,IAArC,CAAV,CAAA;AADgD,CAAlD;AAwBAd,IAAA,CAAKG,GAAL,CAASC,IAAT,CAAcwE,aAAd,GAA8BC,QAAQ,CAACC,MAAD,EAAS3B,GAAT,CAAc;AAClDnD,MAAA,CAAKG,GAAL,CAASqC,OAAT,CAAiBuC,yBAAjB,CAA2CD,MAA3C,CAAA;AAEA,MAAI1B,OAAJ;AACA,MAAID,GAAJ,YAAmBnD,IAAnB,CAAwBc,IAAxB,CAA6BuC,OAA7B;AACED,WAAA,GAAUD,GAAV;AADF;AAGEC,WAAA,GAAUpD,IAAA,CAAKc,IAAL,CAAUuC,OAAV,CAAkBC,uBAAlB,CAA0CH,GAA1C,CAAV;AAHF;AAKA2B,QAAA,CAAOE,IAAP,GAAchF,IAAA,CAAKc,IAAL,CAAUuC,OAAV,CAAkBI,MAAlB,CAAyBL,OAAzB,CAAd;AATkD,CAApD;AAyBApD,IAAA,CAAKG,GAAL,CAASC,IAAT,CAAc6E,WAAd,GAA4BC,QAAQ,CAACC,YAAD,EAAehC,GAAf,CAAoB;AACtDnD,MAAA,CAAKG,GAAL,CAASqC,OAAT,CAAiB4C,wBAAjB,CAA0CD,YAA1C,CAAA;AAEA,MAAI/B,OAAJ;AACA,MAAID,GAAJ,YAAmBnD,IAAnB,CAAwBc,IAAxB,CAA6BuC,OAA7B;AACED,WAAA,GAAUD,GAAV;AADF,QAEO;AACL,QAAIkC,eAAe,gBAAA,CAAiBC,IAAjB,CAAsBnC,GAAtB,CAAnB;AACAC,WAAA,GAAUpD,IAAA,CAAKc,IAAL,CAAUuC,OAAV,CAAkBC,uBAAlB,CAA0CH,GAA1C,EAA+CkC,YAA/C,CAAV;AAFK;AAIPF,cAAA,CAAaI,GAAb,GAAmBvF,IAAA,CAAKc,IAAL,CAAUuC,OAAV,CAAkBI,MAAlB,CAAyBL,OAAzB,CAAnB;AAVsD,CAAxD;AAyBApD,IAAA,CAAKG,GAAL,CAASC,IAAT,CAAcoF,WAAd,GAA4BC,QAAQ,CAACC,YAAD,EAAevC,GAAf,CAAoB;AACtDnD,MAAA,CAAKG,GAAL,CAASqC,OAAT,CAAiBmD,wBAAjB,CAA0CD,YAA1C,CAAA;AAEA,MAAItC,OAAJ;AACA,MAAID,GAAJ,YAAmBnD,IAAnB,CAAwBc,IAAxB,CAA6BuC,OAA7B;AACED,WAAA,GAAUD,GAAV;AADF,QAEO;AACL,QAAIkC,eAAe,gBAAA,CAAiBC,IAAjB,CAAsBnC,GAAtB,CAAnB;AACAC,WAAA,GAAUpD,IAAA,CAAKc,IAAL,CAAUuC,OAAV,CAAkBC,uBAAlB,CAA0CH,GAA1C,EAA+CkC,YAA/C,CAAV;AAFK;AAIPK,cAAA,CAAaH,GAAb,GAAmBvF,IAAA,CAAKc,IAAL,CAAUuC,OAAV,CAAkBI,MAAlB,CAAyBL,OAAzB,CAAnB;AAVsD,CAAxD;AAyBApD,IAAA,CAAKG,GAAL,CAASC,IAAT,CAAcwF,WAAd,GAA4BC,QAAQ,CAACC,YAAD,EAAe3C,GAAf,CAAoB;AACtDnD,MAAA,CAAKG,GAAL,CAASqC,OAAT,CAAiBuD,wBAAjB,CAA0CD,YAA1C,CAAA;AAEA,MAAI1C,OAAJ;AACA,MAAID,GAAJ,YAAmBnD,IAAnB,CAAwBc,IAAxB,CAA6BuC,OAA7B;AACED,WAAA,GAAUD,GAAV;AADF,QAEO;AACL,QAAIkC,eAAe,gBAAA,CAAiBC,IAAjB,CAAsBnC,GAAtB,CAAnB;AACAC,WAAA,GAAUpD,IAAA,CAAKc,IAAL,CAAUuC,OAAV,CAAkBC,uBAAlB,CAA0CH,GAA1C,EAA+CkC,YAA/C,CAAV;AAFK;AAIPS,cAAA,CAAaP,GAAb,GAAmBvF,IAAA,CAAKc,IAAL,CAAUuC,OAAV,CAAkBI,MAAlB,CAAyBL,OAAzB,CAAnB;AAVsD,CAAxD;AA2BApD,IAAA,CAAKG,GAAL,CAASC,IAAT,CAAc4F,WAAd,GAA4BC,QAAQ,CAACC,KAAD,EAAQ/C,GAAR,CAAa;AAC/CnD,MAAA,CAAKG,GAAL,CAASqC,OAAT,CAAiB2D,wBAAjB,CAA0CD,KAA1C,CAAA;AACAA,OAAA,CAAMX,GAAN,GAAYvF,IAAA,CAAKc,IAAL,CAAUsF,kBAAV,CAA6BC,sBAA7B,CAAoDlD,GAApD,CAAZ;AAF+C,CAAjD;AAoBAnD,IAAA,CAAKG,GAAL,CAASC,IAAT,CAAckG,WAAd,GAA4BC,QAAQ,CAACC,KAAD,EAAQrD,GAAR,CAAa;AAC/CnD,MAAA,CAAKG,GAAL,CAASqC,OAAT,CAAiBiE,wBAAjB,CAA0CD,KAA1C,CAAA;AACAA,OAAA,CAAMjB,GAAN,GAAYvF,IAAA,CAAKc,IAAL,CAAUsF,kBAAV,CAA6B3C,MAA7B,CAAoCN,GAApC,CAAZ;AAF+C,CAAjD;AAoBAnD,IAAA,CAAKG,GAAL,CAASC,IAAT,CAAcsG,YAAd,GAA6BC,QAAQ,CAACC,MAAD,EAASzD,GAAT,CAAc;AACjDnD,MAAA,CAAKG,GAAL,CAASqC,OAAT,CAAiBqE,yBAAjB,CAA2CD,MAA3C,CAAA;AACAA,QAAA,CAAOrB,GAAP,GAAavF,IAAA,CAAKc,IAAL,CAAUsF,kBAAV,CAA6B3C,MAA7B,CAAoCN,GAApC,CAAb;AAFiD,CAAnD;AAmBAnD,IAAA,CAAKG,GAAL,CAASC,IAAT,CAAc0G,eAAd,GAAgCC,QAAQ,CAACH,MAAD,EAAS9F,IAAT,CAAe;AACrDd,MAAA,CAAKG,GAAL,CAASqC,OAAT,CAAiBqE,yBAAjB,CAA2CD,MAA3C,CAAA;AACAA,QAAA,CAAOI,MAAP,GAAgBhH,IAAA,CAAKc,IAAL,CAAUE,QAAV,CAAmBC,iBAAnB,CAAqCH,IAArC,CAAhB;AAFqD,CAAvD;AA+BAd,IAAA,CAAKG,GAAL,CAASC,IAAT,CAAc6G,iBAAd,GAAkCC,QAAQ,CAACC,IAAD,EAAOhE,GAAP,EAAYiE,GAAZ,CAAiB;AACzDpH,MAAA,CAAKG,GAAL,CAASqC,OAAT,CAAiB6E,uBAAjB,CAAyCF,IAAzC,CAAA;AACAA,MAAA,CAAKC,GAAL,GAAWA,GAAX;AACA,MAAIpH,IAAA,CAAKsH,MAAL,CAAYC,QAAZ,CAAqBC,uBAArB,CAA6CJ,GAA7C,EAAkD,YAAlD,CAAJ,CAAqE;AACnEpH,QAAA,CAAKwC,OAAL,CAAaiF,MAAb,CACItE,GADJ,YACmBnD,IADnB,CACwBc,IADxB,CAC6BsF,kBAD7B,EAEI,oEAFJ,CAAA;AAGAe,QAAA,CAAKnC,IAAL,GAAYhF,IAAA,CAAKc,IAAL,CAAUsF,kBAAV,CAA6B3C,MAA7B,CAAoCN,GAApC,CAAZ;AAJmE,GAArE;AAKO,QAAIA,GAAJ,YAAmBnD,IAAnB,CAAwBc,IAAxB,CAA6BsF,kBAA7B;AACLe,UAAA,CAAKnC,IAAL,GAAYhF,IAAA,CAAKc,IAAL,CAAUsF,kBAAV,CAA6B3C,MAA7B,CAAoCN,GAApC,CAAZ;AADK;AAEA,UAAIA,GAAJ,YAAmBnD,IAAnB,CAAwBc,IAAxB,CAA6BuC,OAA7B;AACL8D,YAAA,CAAKnC,IAAL,GAAYhF,IAAA,CAAKc,IAAL,CAAUuC,OAAV,CAAkBI,MAAlB,CAAyBN,GAAzB,CAAZ;AADK;AAILgE,YAAA,CAAKnC,IAAL,GAAYhF,IAAA,CAAKc,IAAL,CAAUuC,OAAV,CAAkBI,MAAlB,CACRzD,IAAA,CAAKc,IAAL,CAAUuC,OAAV,CAAkBC,uBAAlB,CAA0CH,GAA1C,CADQ,CAAZ;AAJK;AAFA;AALP;AAHyD,CAA3D;AAkCAnD,IAAA,CAAKG,GAAL,CAASC,IAAT,CAAcsH,aAAd,GAA8BC,QAAQ,CAACC,MAAD,EAASzE,GAAT,CAAc;AAClDnD,MAAA,CAAKG,GAAL,CAASqC,OAAT,CAAiBqF,yBAAjB,CAA2CD,MAA3C,CAAA;AACAA,QAAA,CAAOE,IAAP,GAAc9H,IAAA,CAAKc,IAAL,CAAUsF,kBAAV,CAA6BC,sBAA7B,CAAoDlD,GAApD,CAAd;AAFkD,CAApD;AAoBAnD,IAAA,CAAKG,GAAL,CAASC,IAAT,CAAc2H,YAAd,GAA6BC,QAAQ,CAACC,MAAD,EAAS9E,GAAT,CAAc;AACjDnD,MAAA,CAAKG,GAAL,CAASqC,OAAT,CAAiB0F,yBAAjB,CAA2CD,MAA3C,CAAA;AACAA,QAAA,CAAO1C,GAAP,GAAavF,IAAA,CAAKc,IAAL,CAAUsF,kBAAV,CAA6BC,sBAA7B,CAAoDlD,GAApD,CAAb;AAIA,MAAIgF,QAAQnI,IAAA,CAAKoI,cAAL,EAAZ;AACA,MAAID,KAAJ;AACEF,UAAA,CAAOI,YAAP,CAAoB,OAApB,EAA6BF,KAA7B,CAAA;AADF;AAPiD,CAAnD;AA2BAnI,IAAA,CAAKG,GAAL,CAASC,IAAT,CAAckI,gBAAd,GAAiCC,QAAQ,CAACN,MAAD,EAASO,OAAT,CAAkB;AACzDxI,MAAA,CAAKG,GAAL,CAASqC,OAAT,CAAiB0F,yBAAjB,CAA2CD,MAA3C,CAAA;AACAA,QAAA,CAAOQ,IAAP,GAAczI,IAAA,CAAKc,IAAL,CAAU4H,UAAV,CAAqBC,mBAArB,CAAyCH,OAAzC,CAAd;AAIA,MAAIL,QAAQnI,IAAA,CAAKoI,cAAL,EAAZ;AACA,MAAID,KAAJ;AACEF,UAAA,CAAOI,YAAP,CAAoB,OAApB,EAA6BF,KAA7B,CAAA;AADF;AAPyD,CAA3D;AAgCAnI,IAAA,CAAKG,GAAL,CAASC,IAAT,CAAcwI,eAAd,GAAgCC,QAAQ,CAACC,GAAD,EAAM3F,GAAN,CAAW;AACjDnD,MAAA,CAAKG,GAAL,CAASqC,OAAT,CAAiBuG,gBAAjB,CAAkCD,GAAlC,CAAA;AAEA,MAAI1F,OAAJ;AACA,MAAID,GAAJ,YAAmBnD,IAAnB,CAAwBc,IAAxB,CAA6BuC,OAA7B;AACED,WAAA,GAAUD,GAAV;AADF;AAGEC,WAAA,GAAUpD,IAAA,CAAKc,IAAL,CAAUuC,OAAV,CAAkBC,uBAAlB,CAA0CH,GAA1C,CAAV;AAHF;AAKA2F,KAAA,CAAI9D,IAAJ,GAAWhF,IAAA,CAAKc,IAAL,CAAUuC,OAAV,CAAkBI,MAAlB,CAAyBL,OAAzB,CAAX;AATiD,CAAnD;AAiCApD,IAAA,CAAKG,GAAL,CAASC,IAAT,CAAc4I,cAAd,GAA+BC,QAAQ,CAACH,GAAD,EAAM3F,GAAN,CAAW;AAChDnD,MAAA,CAAKG,GAAL,CAASqC,OAAT,CAAiBuG,gBAAjB,CAAkCD,GAAlC,CAAA;AAEA,MAAI1F,OAAJ;AACA,MAAID,GAAJ,YAAmBnD,IAAnB,CAAwBc,IAAxB,CAA6BuC,OAA7B;AACED,WAAA,GAAUD,GAAV;AADF;AAGEC,WAAA,GAAUpD,IAAA,CAAKc,IAAL,CAAUuC,OAAV,CAAkBC,uBAAlB,CAA0CH,GAA1C,CAAV;AAHF;AAKA2F,KAAA,CAAII,MAAJ,CAAWlJ,IAAA,CAAKc,IAAL,CAAUuC,OAAV,CAAkBI,MAAlB,CAAyBL,OAAzB,CAAX,CAAA;AATgD,CAAlD;AA+BApD,IAAA,CAAKG,GAAL,CAASC,IAAT,CAAc+I,eAAd,GAAgCC,QAAQ,CAACN,GAAD,EAAM3F,GAAN,CAAW;AACjDnD,MAAA,CAAKG,GAAL,CAASqC,OAAT,CAAiBuG,gBAAjB,CAAkCD,GAAlC,CAAA;AAEA,MAAI1F,OAAJ;AACA,MAAID,GAAJ,YAAmBnD,IAAnB,CAAwBc,IAAxB,CAA6BuC,OAA7B;AACED,WAAA,GAAUD,GAAV;AADF;AAGEC,WAAA,GAAUpD,IAAA,CAAKc,IAAL,CAAUuC,OAAV,CAAkBC,uBAAlB,CAA0CH,GAA1C,CAAV;AAHF;AAKA2F,KAAA,CAAIO,OAAJ,CAAYrJ,IAAA,CAAKc,IAAL,CAAUuC,OAAV,CAAkBI,MAAlB,CAAyBL,OAAzB,CAAZ,CAAA;AATiD,CAAnD;AAyCApD,IAAA,CAAKG,GAAL,CAASC,IAAT,CAAckJ,YAAd,GAA6BC,QAAQ,CACjCpG,GADiC,EAC5BqG,aAD4B,EACbC,QADa,EACHC,SADG,EACQC,WADR,CACqB;AAExD,MAAIvG,OAAJ;AACA,MAAID,GAAJ,YAAmBnD,IAAnB,CAAwBc,IAAxB,CAA6BuC,OAA7B;AACED,WAAA,GAAUD,GAAV;AADF;AAGEC,WAAA,GAAUpD,IAAA,CAAKc,IAAL,CAAUuC,OAAV,CAAkBC,uBAAlB,CAA0CH,GAA1C,CAAV;AAHF;AAKA,MAAIyG,MAAMJ,aAANI,IAAuB5J,IAAvB4J,CAA4BC,MAAhC;AACA,SAAOD,GAAA,CAAIE,IAAJ,CACH9J,IAAA,CAAKc,IAAL,CAAUuC,OAAV,CAAkBI,MAAlB,CAAyBL,OAAzB,CADG,EAMHqG,QAAA,GAAWzJ,IAAA,CAAKsH,MAAL,CAAYyC,KAAZ,CAAkBtG,MAAlB,CAAyBgG,QAAzB,CAAX,GAAgD,EAN7C,EAMiDC,SANjD,EAOHC,WAPG,CAAP;AATwD,CAD1D;AA2BA3J,IAAA,CAAKG,GAAL,CAASC,IAAT,CAAc4J,mBAAd,GAAoCC,QAAQ,CAACC,MAAD,EAASpJ,IAAT,CAAe;AACzD,SAAOd,IAAA,CAAKG,GAAL,CAASC,IAAT,CAAc+J,eAAd,CAA8BD,MAA9B,EAAsCpJ,IAAtC,EAA4C,WAA5C,CAAP;AADyD,CAA3D;AAaAd,IAAA,CAAKG,GAAL,CAASC,IAAT,CAAc+J,eAAd,GAAgCC,QAAQ,CAACF,MAAD,EAAS1B,OAAT,EAAkB6B,IAAlB,CAAwB;AAC9D,SAAOH,MAAA,CAAOC,eAAP,CACHnK,IAAA,CAAKc,IAAL,CAAUE,QAAV,CAAmBC,iBAAnB,CAAqCuH,OAArC,CADG,EAC4C6B,IAD5C,CAAP;AAD8D,CAAhE;AAmBArK,IAAA,CAAKG,GAAL,CAASC,IAAT,CAAckK,mBAAd,GAAoCC,QAAQ,CAACC,IAAD,CAAO;AAEjD,MAAI,CAAC,aAAA,CAAclF,IAAd,CAAmBkF,IAAnB,CAAwBH,IAAxB,CAAL;AACE,UAAM,IAAIzH,KAAJ,CACF,oEADE,CAAN;AADF;AAIA,MAAI6H,YAAYzK,IAAA,CAAK6J,MAAL,CAAYa,GAAZ,CAAgBC,eAAhB,CAAgCH,IAAhC,CAAhB;AACA,MAAII,QAAQ,IAAI5K,IAAJ,CAAS6J,MAAT,CAAgBgB,KAA5B;AACAD,OAAA,CAAME,MAAN,GAAeC,QAAQ,EAAG;AACxB/K,QAAA,CAAK6J,MAAL,CAAYa,GAAZ,CAAgBM,eAAhB,CAAgCP,SAAhC,CAAA;AADwB,GAA1B;AAGAzK,MAAA,CAAKG,GAAL,CAASC,IAAT,CAAc6E,WAAd,CACI2F,KADJ,EAEI5K,IAAA,CAAKc,IAAL,CAAUmK,oBAAV,CACKC,2CADL,CAEQlL,IAAA,CAAKsH,MAAL,CAAYyC,KAAZ,CAAkBoB,IAAlB,CAAuB,iBAAvB,CAFR,EAEmDV,SAFnD,CAFJ,CAAA;AAKA,SAAOG,KAAP;AAhBiD,CAAnD;;",
"sources":["goog/dom/safe.js"],
"sourcesContent":["// Copyright 2013 The Closure Library Authors. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS-IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n/**\n * @fileoverview Type-safe wrappers for unsafe DOM APIs.\n *\n * This file provides type-safe wrappers for DOM APIs that can result in\n * cross-site scripting (XSS) vulnerabilities, if the API is supplied with\n * untrusted (attacker-controlled) input.  Instead of plain strings, the type\n * safe wrappers consume values of types from the goog.html package whose\n * contract promises that values are safe to use in the corresponding context.\n *\n * Hence, a program that exclusively uses the wrappers in this file (i.e., whose\n * only reference to security-sensitive raw DOM APIs are in this file) is\n * guaranteed to be free of XSS due to incorrect use of such DOM APIs (modulo\n * correctness of code that produces values of the respective goog.html types,\n * and absent code that violates type safety).\n *\n * For example, assigning to an element's .innerHTML property a string that is\n * derived (even partially) from untrusted input typically results in an XSS\n * vulnerability. The type-safe wrapper goog.dom.safe.setInnerHtml consumes a\n * value of type goog.html.SafeHtml, whose contract states that using its values\n * in a HTML context will not result in XSS. Hence a program that is free of\n * direct assignments to any element's innerHTML property (with the exception of\n * the assignment to .innerHTML in this file) is guaranteed to be free of XSS\n * due to assignment of untrusted strings to the innerHTML property.\n */\n\ngoog.provide('goog.dom.safe');\ngoog.provide('goog.dom.safe.InsertAdjacentHtmlPosition');\n\ngoog.require('goog.asserts');\ngoog.require('goog.dom.asserts');\ngoog.require('goog.functions');\ngoog.require('goog.html.SafeHtml');\ngoog.require('goog.html.SafeScript');\ngoog.require('goog.html.SafeStyle');\ngoog.require('goog.html.SafeUrl');\ngoog.require('goog.html.TrustedResourceUrl');\ngoog.require('goog.html.uncheckedconversions');\ngoog.require('goog.string.Const');\ngoog.require('goog.string.internal');\n\n\n/** @enum {string} */\ngoog.dom.safe.InsertAdjacentHtmlPosition = {\n  AFTERBEGIN: 'afterbegin',\n  AFTEREND: 'afterend',\n  BEFOREBEGIN: 'beforebegin',\n  BEFOREEND: 'beforeend'\n};\n\n\n/**\n * Inserts known-safe HTML into a Node, at the specified position.\n * @param {!Node} node The node on which to call insertAdjacentHTML.\n * @param {!goog.dom.safe.InsertAdjacentHtmlPosition} position Position where\n *     to insert the HTML.\n * @param {!goog.html.SafeHtml} html The known-safe HTML to insert.\n */\ngoog.dom.safe.insertAdjacentHtml = function(node, position, html) {\n  node.insertAdjacentHTML(position, goog.html.SafeHtml.unwrapTrustedHTML(html));\n};\n\n\n/**\n * Tags not allowed in goog.dom.safe.setInnerHtml.\n * @private @const {!Object<string, boolean>}\n */\ngoog.dom.safe.SET_INNER_HTML_DISALLOWED_TAGS_ = {\n  'MATH': true,\n  'SCRIPT': true,\n  'STYLE': true,\n  'SVG': true,\n  'TEMPLATE': true\n};\n\n\n/**\n * Whether assigning to innerHTML results in a non-spec-compliant clean-up. Used\n * to define goog.dom.safe.unsafeSetInnerHtmlDoNotUseOrElse.\n *\n * <p>As mentioned in https://stackoverflow.com/questions/28741528, re-rendering\n * an element in IE by setting innerHTML causes IE to recursively disconnect all\n * parent/children connections that were in the previous contents of the\n * element. Unfortunately, this can unexpectedly result in confusing cases where\n * a function is run (typically asynchronously) on element that has since\n * disconnected from the DOM but assumes the presence of its children. A simple\n * workaround is to remove all children first. Testing on IE11 via\n * https://jsperf.com/innerhtml-vs-removechild/239, removeChild seems to be\n * ~10x faster than innerHTML='' for a large number of children (perhaps due\n * to the latter's recursive behavior), implying that this workaround would\n * not hurt performance and might actually improve it.\n * @return {boolean}\n * @private\n */\ngoog.dom.safe.isInnerHtmlCleanupRecursive_ =\n    goog.functions.cacheReturnValue(function() {\n      // `document` missing in some test frameworks.\n      if (goog.DEBUG && typeof document === 'undefined') {\n        return false;\n      }\n      // Create 3 nested <div>s without using innerHTML.\n      // We're not chaining the appendChilds in one call,  as this breaks\n      // in a DocumentFragment.\n      var div = document.createElement('div');\n      var childDiv = document.createElement('div');\n      childDiv.appendChild(document.createElement('div'));\n      div.appendChild(childDiv);\n      // `firstChild` is null in Google Js Test.\n      if (goog.DEBUG && !div.firstChild) {\n        return false;\n      }\n      var innerChild = div.firstChild.firstChild;\n      div.innerHTML =\n          goog.html.SafeHtml.unwrapTrustedHTML(goog.html.SafeHtml.EMPTY);\n      return !innerChild.parentElement;\n    });\n\n\n/**\n * Assigns HTML to an element's innerHTML property. Helper to use only here and\n * in soy.js.\n * @param {?Element} elem The element whose innerHTML is to be assigned to.\n * @param {!goog.html.SafeHtml} html\n */\ngoog.dom.safe.unsafeSetInnerHtmlDoNotUseOrElse = function(elem, html) {\n  // See comment above goog.dom.safe.isInnerHtmlCleanupRecursive_.\n  if (goog.dom.safe.isInnerHtmlCleanupRecursive_()) {\n    while (elem.lastChild) {\n      elem.removeChild(elem.lastChild);\n    }\n  }\n  elem.innerHTML = goog.html.SafeHtml.unwrapTrustedHTML(html);\n};\n\n\n/**\n * Assigns known-safe HTML to an element's innerHTML property.\n * @param {!Element} elem The element whose innerHTML is to be assigned to.\n * @param {!goog.html.SafeHtml} html The known-safe HTML to assign.\n * @throws {Error} If called with one of these tags: math, script, style, svg,\n *     template.\n */\ngoog.dom.safe.setInnerHtml = function(elem, html) {\n  if (goog.asserts.ENABLE_ASSERTS) {\n    var tagName = elem.tagName.toUpperCase();\n    if (goog.dom.safe.SET_INNER_HTML_DISALLOWED_TAGS_[tagName]) {\n      throw new Error(\n          'goog.dom.safe.setInnerHtml cannot be used to set content of ' +\n          elem.tagName + '.');\n    }\n  }\n\n  goog.dom.safe.unsafeSetInnerHtmlDoNotUseOrElse(elem, html);\n};\n\n\n/**\n * Assigns known-safe HTML to an element's outerHTML property.\n * @param {!Element} elem The element whose outerHTML is to be assigned to.\n * @param {!goog.html.SafeHtml} html The known-safe HTML to assign.\n */\ngoog.dom.safe.setOuterHtml = function(elem, html) {\n  elem.outerHTML = goog.html.SafeHtml.unwrapTrustedHTML(html);\n};\n\n\n/**\n * Safely assigns a URL a form element's action property.\n *\n * If url is of type goog.html.SafeUrl, its value is unwrapped and assigned to\n * form's action property.  If url is of type string however, it is first\n * sanitized using goog.html.SafeUrl.sanitize.\n *\n * Example usage:\n *   goog.dom.safe.setFormElementAction(formEl, url);\n * which is a safe alternative to\n *   formEl.action = url;\n * The latter can result in XSS vulnerabilities if url is a\n * user-/attacker-controlled value.\n *\n * @param {!Element} form The form element whose action property\n *     is to be assigned to.\n * @param {string|!goog.html.SafeUrl} url The URL to assign.\n * @see goog.html.SafeUrl#sanitize\n */\ngoog.dom.safe.setFormElementAction = function(form, url) {\n  /** @type {!goog.html.SafeUrl} */\n  var safeUrl;\n  if (url instanceof goog.html.SafeUrl) {\n    safeUrl = url;\n  } else {\n    safeUrl = goog.html.SafeUrl.sanitizeAssertUnchanged(url);\n  }\n  goog.dom.asserts.assertIsHTMLFormElement(form).action =\n      goog.html.SafeUrl.unwrap(safeUrl);\n};\n\n/**\n * Safely assigns a URL to a button element's formaction property.\n *\n * If url is of type goog.html.SafeUrl, its value is unwrapped and assigned to\n * button's formaction property.  If url is of type string however, it is first\n * sanitized using goog.html.SafeUrl.sanitize.\n *\n * Example usage:\n *   goog.dom.safe.setButtonFormAction(buttonEl, url);\n * which is a safe alternative to\n *   buttonEl.action = url;\n * The latter can result in XSS vulnerabilities if url is a\n * user-/attacker-controlled value.\n *\n * @param {!Element} button The button element whose action property\n *     is to be assigned to.\n * @param {string|!goog.html.SafeUrl} url The URL to assign.\n * @see goog.html.SafeUrl#sanitize\n */\ngoog.dom.safe.setButtonFormAction = function(button, url) {\n  /** @type {!goog.html.SafeUrl} */\n  var safeUrl;\n  if (url instanceof goog.html.SafeUrl) {\n    safeUrl = url;\n  } else {\n    safeUrl = goog.html.SafeUrl.sanitizeAssertUnchanged(url);\n  }\n  goog.dom.asserts.assertIsHTMLButtonElement(button).formAction =\n      goog.html.SafeUrl.unwrap(safeUrl);\n};\n/**\n * Safely assigns a URL to an input element's formaction property.\n *\n * If url is of type goog.html.SafeUrl, its value is unwrapped and assigned to\n * input's formaction property.  If url is of type string however, it is first\n * sanitized using goog.html.SafeUrl.sanitize.\n *\n * Example usage:\n *   goog.dom.safe.setInputFormAction(inputEl, url);\n * which is a safe alternative to\n *   inputEl.action = url;\n * The latter can result in XSS vulnerabilities if url is a\n * user-/attacker-controlled value.\n *\n * @param {!Element} input The input element whose action property\n *     is to be assigned to.\n * @param {string|!goog.html.SafeUrl} url The URL to assign.\n * @see goog.html.SafeUrl#sanitize\n */\ngoog.dom.safe.setInputFormAction = function(input, url) {\n  /** @type {!goog.html.SafeUrl} */\n  var safeUrl;\n  if (url instanceof goog.html.SafeUrl) {\n    safeUrl = url;\n  } else {\n    safeUrl = goog.html.SafeUrl.sanitizeAssertUnchanged(url);\n  }\n  goog.dom.asserts.assertIsHTMLInputElement(input).formAction =\n      goog.html.SafeUrl.unwrap(safeUrl);\n};\n\n/**\n * Sets the given element's style property to the contents of the provided\n * SafeStyle object.\n * @param {!Element} elem\n * @param {!goog.html.SafeStyle} style\n */\ngoog.dom.safe.setStyle = function(elem, style) {\n  elem.style.cssText = goog.html.SafeStyle.unwrap(style);\n};\n\n\n/**\n * Writes known-safe HTML to a document.\n * @param {!Document} doc The document to be written to.\n * @param {!goog.html.SafeHtml} html The known-safe HTML to assign.\n */\ngoog.dom.safe.documentWrite = function(doc, html) {\n  doc.write(goog.html.SafeHtml.unwrapTrustedHTML(html));\n};\n\n\n/**\n * Safely assigns a URL to an anchor element's href property.\n *\n * If url is of type goog.html.SafeUrl, its value is unwrapped and assigned to\n * anchor's href property.  If url is of type string however, it is first\n * sanitized using goog.html.SafeUrl.sanitize.\n *\n * Example usage:\n *   goog.dom.safe.setAnchorHref(anchorEl, url);\n * which is a safe alternative to\n *   anchorEl.href = url;\n * The latter can result in XSS vulnerabilities if url is a\n * user-/attacker-controlled value.\n *\n * @param {!HTMLAnchorElement} anchor The anchor element whose href property\n *     is to be assigned to.\n * @param {string|!goog.html.SafeUrl} url The URL to assign.\n * @see goog.html.SafeUrl#sanitize\n */\ngoog.dom.safe.setAnchorHref = function(anchor, url) {\n  goog.dom.asserts.assertIsHTMLAnchorElement(anchor);\n  /** @type {!goog.html.SafeUrl} */\n  var safeUrl;\n  if (url instanceof goog.html.SafeUrl) {\n    safeUrl = url;\n  } else {\n    safeUrl = goog.html.SafeUrl.sanitizeAssertUnchanged(url);\n  }\n  anchor.href = goog.html.SafeUrl.unwrap(safeUrl);\n};\n\n\n/**\n * Safely assigns a URL to an image element's src property.\n *\n * If url is of type goog.html.SafeUrl, its value is unwrapped and assigned to\n * image's src property.  If url is of type string however, it is first\n * sanitized using goog.html.SafeUrl.sanitize.\n *\n * @param {!HTMLImageElement} imageElement The image element whose src property\n *     is to be assigned to.\n * @param {string|!goog.html.SafeUrl} url The URL to assign.\n * @see goog.html.SafeUrl#sanitize\n */\ngoog.dom.safe.setImageSrc = function(imageElement, url) {\n  goog.dom.asserts.assertIsHTMLImageElement(imageElement);\n  /** @type {!goog.html.SafeUrl} */\n  var safeUrl;\n  if (url instanceof goog.html.SafeUrl) {\n    safeUrl = url;\n  } else {\n    var allowDataUrl = /^data:image\\//i.test(url);\n    safeUrl = goog.html.SafeUrl.sanitizeAssertUnchanged(url, allowDataUrl);\n  }\n  imageElement.src = goog.html.SafeUrl.unwrap(safeUrl);\n};\n\n/**\n * Safely assigns a URL to a audio element's src property.\n *\n * If url is of type goog.html.SafeUrl, its value is unwrapped and assigned to\n * audio's src property.  If url is of type string however, it is first\n * sanitized using goog.html.SafeUrl.sanitize.\n *\n * @param {!HTMLAudioElement} audioElement The audio element whose src property\n *     is to be assigned to.\n * @param {string|!goog.html.SafeUrl} url The URL to assign.\n * @see goog.html.SafeUrl#sanitize\n */\ngoog.dom.safe.setAudioSrc = function(audioElement, url) {\n  goog.dom.asserts.assertIsHTMLAudioElement(audioElement);\n  /** @type {!goog.html.SafeUrl} */\n  var safeUrl;\n  if (url instanceof goog.html.SafeUrl) {\n    safeUrl = url;\n  } else {\n    var allowDataUrl = /^data:audio\\//i.test(url);\n    safeUrl = goog.html.SafeUrl.sanitizeAssertUnchanged(url, allowDataUrl);\n  }\n  audioElement.src = goog.html.SafeUrl.unwrap(safeUrl);\n};\n\n/**\n * Safely assigns a URL to a video element's src property.\n *\n * If url is of type goog.html.SafeUrl, its value is unwrapped and assigned to\n * video's src property.  If url is of type string however, it is first\n * sanitized using goog.html.SafeUrl.sanitize.\n *\n * @param {!HTMLVideoElement} videoElement The video element whose src property\n *     is to be assigned to.\n * @param {string|!goog.html.SafeUrl} url The URL to assign.\n * @see goog.html.SafeUrl#sanitize\n */\ngoog.dom.safe.setVideoSrc = function(videoElement, url) {\n  goog.dom.asserts.assertIsHTMLVideoElement(videoElement);\n  /** @type {!goog.html.SafeUrl} */\n  var safeUrl;\n  if (url instanceof goog.html.SafeUrl) {\n    safeUrl = url;\n  } else {\n    var allowDataUrl = /^data:video\\//i.test(url);\n    safeUrl = goog.html.SafeUrl.sanitizeAssertUnchanged(url, allowDataUrl);\n  }\n  videoElement.src = goog.html.SafeUrl.unwrap(safeUrl);\n};\n\n/**\n * Safely assigns a URL to an embed element's src property.\n *\n * Example usage:\n *   goog.dom.safe.setEmbedSrc(embedEl, url);\n * which is a safe alternative to\n *   embedEl.src = url;\n * The latter can result in loading untrusted code unless it is ensured that\n * the URL refers to a trustworthy resource.\n *\n * @param {!HTMLEmbedElement} embed The embed element whose src property\n *     is to be assigned to.\n * @param {!goog.html.TrustedResourceUrl} url The URL to assign.\n */\ngoog.dom.safe.setEmbedSrc = function(embed, url) {\n  goog.dom.asserts.assertIsHTMLEmbedElement(embed);\n  embed.src = goog.html.TrustedResourceUrl.unwrapTrustedScriptURL(url);\n};\n\n\n/**\n * Safely assigns a URL to a frame element's src property.\n *\n * Example usage:\n *   goog.dom.safe.setFrameSrc(frameEl, url);\n * which is a safe alternative to\n *   frameEl.src = url;\n * The latter can result in loading untrusted code unless it is ensured that\n * the URL refers to a trustworthy resource.\n *\n * @param {!HTMLFrameElement} frame The frame element whose src property\n *     is to be assigned to.\n * @param {!goog.html.TrustedResourceUrl} url The URL to assign.\n */\ngoog.dom.safe.setFrameSrc = function(frame, url) {\n  goog.dom.asserts.assertIsHTMLFrameElement(frame);\n  frame.src = goog.html.TrustedResourceUrl.unwrap(url);\n};\n\n\n/**\n * Safely assigns a URL to an iframe element's src property.\n *\n * Example usage:\n *   goog.dom.safe.setIframeSrc(iframeEl, url);\n * which is a safe alternative to\n *   iframeEl.src = url;\n * The latter can result in loading untrusted code unless it is ensured that\n * the URL refers to a trustworthy resource.\n *\n * @param {!HTMLIFrameElement} iframe The iframe element whose src property\n *     is to be assigned to.\n * @param {!goog.html.TrustedResourceUrl} url The URL to assign.\n */\ngoog.dom.safe.setIframeSrc = function(iframe, url) {\n  goog.dom.asserts.assertIsHTMLIFrameElement(iframe);\n  iframe.src = goog.html.TrustedResourceUrl.unwrap(url);\n};\n\n\n/**\n * Safely assigns HTML to an iframe element's srcdoc property.\n *\n * Example usage:\n *   goog.dom.safe.setIframeSrcdoc(iframeEl, safeHtml);\n * which is a safe alternative to\n *   iframeEl.srcdoc = html;\n * The latter can result in loading untrusted code.\n *\n * @param {!HTMLIFrameElement} iframe The iframe element whose srcdoc property\n *     is to be assigned to.\n * @param {!goog.html.SafeHtml} html The HTML to assign.\n */\ngoog.dom.safe.setIframeSrcdoc = function(iframe, html) {\n  goog.dom.asserts.assertIsHTMLIFrameElement(iframe);\n  iframe.srcdoc = goog.html.SafeHtml.unwrapTrustedHTML(html);\n};\n\n\n/**\n * Safely sets a link element's href and rel properties. Whether or not\n * the URL assigned to href has to be a goog.html.TrustedResourceUrl\n * depends on the value of the rel property. If rel contains \"stylesheet\"\n * then a TrustedResourceUrl is required.\n *\n * Example usage:\n *   goog.dom.safe.setLinkHrefAndRel(linkEl, url, 'stylesheet');\n * which is a safe alternative to\n *   linkEl.rel = 'stylesheet';\n *   linkEl.href = url;\n * The latter can result in loading untrusted code unless it is ensured that\n * the URL refers to a trustworthy resource.\n *\n * @param {!HTMLLinkElement} link The link element whose href property\n *     is to be assigned to.\n * @param {string|!goog.html.SafeUrl|!goog.html.TrustedResourceUrl} url The URL\n *     to assign to the href property. Must be a TrustedResourceUrl if the\n *     value assigned to rel contains \"stylesheet\". A string value is\n *     sanitized with goog.html.SafeUrl.sanitize.\n * @param {string} rel The value to assign to the rel property.\n * @throws {Error} if rel contains \"stylesheet\" and url is not a\n *     TrustedResourceUrl\n * @see goog.html.SafeUrl#sanitize\n */\ngoog.dom.safe.setLinkHrefAndRel = function(link, url, rel) {\n  goog.dom.asserts.assertIsHTMLLinkElement(link);\n  link.rel = rel;\n  if (goog.string.internal.caseInsensitiveContains(rel, 'stylesheet')) {\n    goog.asserts.assert(\n        url instanceof goog.html.TrustedResourceUrl,\n        'URL must be TrustedResourceUrl because \"rel\" contains \"stylesheet\"');\n    link.href = goog.html.TrustedResourceUrl.unwrap(url);\n  } else if (url instanceof goog.html.TrustedResourceUrl) {\n    link.href = goog.html.TrustedResourceUrl.unwrap(url);\n  } else if (url instanceof goog.html.SafeUrl) {\n    link.href = goog.html.SafeUrl.unwrap(url);\n  } else {  // string\n    // SafeUrl.sanitize must return legitimate SafeUrl when passed a string.\n    link.href = goog.html.SafeUrl.unwrap(\n        goog.html.SafeUrl.sanitizeAssertUnchanged(url));\n  }\n};\n\n\n/**\n * Safely assigns a URL to an object element's data property.\n *\n * Example usage:\n *   goog.dom.safe.setObjectData(objectEl, url);\n * which is a safe alternative to\n *   objectEl.data = url;\n * The latter can result in loading untrusted code unless setit is ensured that\n * the URL refers to a trustworthy resource.\n *\n * @param {!HTMLObjectElement} object The object element whose data property\n *     is to be assigned to.\n * @param {!goog.html.TrustedResourceUrl} url The URL to assign.\n */\ngoog.dom.safe.setObjectData = function(object, url) {\n  goog.dom.asserts.assertIsHTMLObjectElement(object);\n  object.data = goog.html.TrustedResourceUrl.unwrapTrustedScriptURL(url);\n};\n\n\n/**\n * Safely assigns a URL to a script element's src property.\n *\n * Example usage:\n *   goog.dom.safe.setScriptSrc(scriptEl, url);\n * which is a safe alternative to\n *   scriptEl.src = url;\n * The latter can result in loading untrusted code unless it is ensured that\n * the URL refers to a trustworthy resource.\n *\n * @param {!HTMLScriptElement} script The script element whose src property\n *     is to be assigned to.\n * @param {!goog.html.TrustedResourceUrl} url The URL to assign.\n */\ngoog.dom.safe.setScriptSrc = function(script, url) {\n  goog.dom.asserts.assertIsHTMLScriptElement(script);\n  script.src = goog.html.TrustedResourceUrl.unwrapTrustedScriptURL(url);\n\n  // If CSP nonces are used, propagate them to dynamically created scripts.\n  // This is necessary to allow nonce-based CSPs without 'strict-dynamic'.\n  var nonce = goog.getScriptNonce();\n  if (nonce) {\n    script.setAttribute('nonce', nonce);\n  }\n};\n\n\n/**\n * Safely assigns a value to a script element's content.\n *\n * Example usage:\n *   goog.dom.safe.setScriptContent(scriptEl, content);\n * which is a safe alternative to\n *   scriptEl.text = content;\n * The latter can result in executing untrusted code unless it is ensured that\n * the code is loaded from a trustworthy resource.\n *\n * @param {!HTMLScriptElement} script The script element whose content is being\n *     set.\n * @param {!goog.html.SafeScript} content The content to assign.\n */\ngoog.dom.safe.setScriptContent = function(script, content) {\n  goog.dom.asserts.assertIsHTMLScriptElement(script);\n  script.text = goog.html.SafeScript.unwrapTrustedScript(content);\n\n  // If CSP nonces are used, propagate them to dynamically created scripts.\n  // This is necessary to allow nonce-based CSPs without 'strict-dynamic'.\n  var nonce = goog.getScriptNonce();\n  if (nonce) {\n    script.setAttribute('nonce', nonce);\n  }\n};\n\n\n/**\n * Safely assigns a URL to a Location object's href property.\n *\n * If url is of type goog.html.SafeUrl, its value is unwrapped and assigned to\n * loc's href property.  If url is of type string however, it is first sanitized\n * using goog.html.SafeUrl.sanitize.\n *\n * Example usage:\n *   goog.dom.safe.setLocationHref(document.location, redirectUrl);\n * which is a safe alternative to\n *   document.location.href = redirectUrl;\n * The latter can result in XSS vulnerabilities if redirectUrl is a\n * user-/attacker-controlled value.\n *\n * @param {!Location} loc The Location object whose href property is to be\n *     assigned to.\n * @param {string|!goog.html.SafeUrl} url The URL to assign.\n * @see goog.html.SafeUrl#sanitize\n */\ngoog.dom.safe.setLocationHref = function(loc, url) {\n  goog.dom.asserts.assertIsLocation(loc);\n  /** @type {!goog.html.SafeUrl} */\n  var safeUrl;\n  if (url instanceof goog.html.SafeUrl) {\n    safeUrl = url;\n  } else {\n    safeUrl = goog.html.SafeUrl.sanitizeAssertUnchanged(url);\n  }\n  loc.href = goog.html.SafeUrl.unwrap(safeUrl);\n};\n\n/**\n * Safely assigns the URL of a Location object.\n *\n * If url is of type goog.html.SafeUrl, its value is unwrapped and\n * passed to Location#assign. If url is of type string however, it is\n * first sanitized using goog.html.SafeUrl.sanitize.\n *\n * Example usage:\n *   goog.dom.safe.assignLocation(document.location, newUrl);\n * which is a safe alternative to\n *   document.location.assign(newUrl);\n * The latter can result in XSS vulnerabilities if newUrl is a\n * user-/attacker-controlled value.\n *\n * This has the same behaviour as setLocationHref, however some test\n * mock Location.assign instead of a property assignment.\n *\n * @param {!Location} loc The Location object which is to be assigned.\n * @param {string|!goog.html.SafeUrl} url The URL to assign.\n * @see goog.html.SafeUrl#sanitize\n */\ngoog.dom.safe.assignLocation = function(loc, url) {\n  goog.dom.asserts.assertIsLocation(loc);\n  /** @type {!goog.html.SafeUrl} */\n  var safeUrl;\n  if (url instanceof goog.html.SafeUrl) {\n    safeUrl = url;\n  } else {\n    safeUrl = goog.html.SafeUrl.sanitizeAssertUnchanged(url);\n  }\n  loc.assign(goog.html.SafeUrl.unwrap(safeUrl));\n};\n\n\n/**\n * Safely replaces the URL of a Location object.\n *\n * If url is of type goog.html.SafeUrl, its value is unwrapped and\n * passed to Location#replace. If url is of type string however, it is\n * first sanitized using goog.html.SafeUrl.sanitize.\n *\n * Example usage:\n *   goog.dom.safe.replaceLocation(document.location, newUrl);\n * which is a safe alternative to\n *   document.location.replace(newUrl);\n * The latter can result in XSS vulnerabilities if newUrl is a\n * user-/attacker-controlled value.\n *\n * @param {!Location} loc The Location object which is to be replaced.\n * @param {string|!goog.html.SafeUrl} url The URL to assign.\n * @see goog.html.SafeUrl#sanitize\n */\ngoog.dom.safe.replaceLocation = function(loc, url) {\n  goog.dom.asserts.assertIsLocation(loc);\n  /** @type {!goog.html.SafeUrl} */\n  var safeUrl;\n  if (url instanceof goog.html.SafeUrl) {\n    safeUrl = url;\n  } else {\n    safeUrl = goog.html.SafeUrl.sanitizeAssertUnchanged(url);\n  }\n  loc.replace(goog.html.SafeUrl.unwrap(safeUrl));\n};\n\n\n/**\n * Safely opens a URL in a new window (via window.open).\n *\n * If url is of type goog.html.SafeUrl, its value is unwrapped and passed in to\n * window.open.  If url is of type string however, it is first sanitized\n * using goog.html.SafeUrl.sanitize.\n *\n * Note that this function does not prevent leakages via the referer that is\n * sent by window.open. It is advised to only use this to open 1st party URLs.\n *\n * Example usage:\n *   goog.dom.safe.openInWindow(url);\n * which is a safe alternative to\n *   window.open(url);\n * The latter can result in XSS vulnerabilities if redirectUrl is a\n * user-/attacker-controlled value.\n *\n * @param {string|!goog.html.SafeUrl} url The URL to open.\n * @param {Window=} opt_openerWin Window of which to call the .open() method.\n *     Defaults to the global window.\n * @param {!goog.string.Const=} opt_name Name of the window to open in. Can be\n *     _top, etc as allowed by window.open().\n * @param {string=} opt_specs Comma-separated list of specifications, same as\n *     in window.open().\n * @param {boolean=} opt_replace Whether to replace the current entry in browser\n *     history, same as in window.open().\n * @return {Window} Window the url was opened in.\n */\ngoog.dom.safe.openInWindow = function(\n    url, opt_openerWin, opt_name, opt_specs, opt_replace) {\n  /** @type {!goog.html.SafeUrl} */\n  var safeUrl;\n  if (url instanceof goog.html.SafeUrl) {\n    safeUrl = url;\n  } else {\n    safeUrl = goog.html.SafeUrl.sanitizeAssertUnchanged(url);\n  }\n  var win = opt_openerWin || goog.global;\n  return win.open(\n      goog.html.SafeUrl.unwrap(safeUrl),\n      // If opt_name is undefined, simply passing that in to open() causes IE to\n      // reuse the current window instead of opening a new one. Thus we pass ''\n      // in instead, which according to spec opens a new window. See\n      // https://html.spec.whatwg.org/multipage/browsers.html#dom-open .\n      opt_name ? goog.string.Const.unwrap(opt_name) : '', opt_specs,\n      opt_replace);\n};\n\n\n/**\n * Parses the HTML as 'text/html'.\n * @param {!DOMParser} parser\n * @param {!goog.html.SafeHtml} html The HTML to be parsed.\n * @return {?Document}\n */\ngoog.dom.safe.parseFromStringHtml = function(parser, html) {\n  return goog.dom.safe.parseFromString(parser, html, 'text/html');\n};\n\n\n/**\n * Parses the string.\n * @param {!DOMParser} parser\n * @param {!goog.html.SafeHtml} content Note: We don't have a special type for\n *     XML od SVG supported by this function so we use SafeHtml.\n * @param {string} type\n * @return {?Document}\n */\ngoog.dom.safe.parseFromString = function(parser, content, type) {\n  return parser.parseFromString(\n      goog.html.SafeHtml.unwrapTrustedHTML(content), type);\n};\n\n\n/**\n * Safely creates an HTMLImageElement from a Blob.\n *\n * Example usage:\n *     goog.dom.safe.createImageFromBlob(blob);\n * which is a safe alternative to\n *     image.src = createObjectUrl(blob)\n * The latter can result in executing malicious same-origin scripts from a bad\n * Blob.\n * @param {!Blob} blob The blob to create the image from.\n * @return {!HTMLImageElement} The image element created from the blob.\n * @throws {!Error} If called with a Blob with a MIME type other than image/.*.\n */\ngoog.dom.safe.createImageFromBlob = function(blob) {\n  // Any image/* MIME type is accepted as safe.\n  if (!/^image\\/.*/g.test(blob.type)) {\n    throw new Error(\n        'goog.dom.safe.createImageFromBlob only accepts MIME type image/.*.');\n  }\n  var objectUrl = goog.global.URL.createObjectURL(blob);\n  var image = new goog.global.Image();\n  image.onload = function() {\n    goog.global.URL.revokeObjectURL(objectUrl);\n  };\n  goog.dom.safe.setImageSrc(\n      image,\n      goog.html.uncheckedconversions\n          .safeUrlFromStringKnownToSatisfyTypeContract(\n              goog.string.Const.from('Image blob URL.'), objectUrl));\n  return image;\n};\n"],
"names":["goog","provide","require","dom","safe","InsertAdjacentHtmlPosition","AFTERBEGIN","AFTEREND","BEFOREBEGIN","BEFOREEND","insertAdjacentHtml","goog.dom.safe.insertAdjacentHtml","node","position","html","insertAdjacentHTML","SafeHtml","unwrapTrustedHTML","SET_INNER_HTML_DISALLOWED_TAGS_","isInnerHtmlCleanupRecursive_","functions","cacheReturnValue","DEBUG","document","div","createElement","childDiv","appendChild","firstChild","innerChild","innerHTML","EMPTY","parentElement","unsafeSetInnerHtmlDoNotUseOrElse","goog.dom.safe.unsafeSetInnerHtmlDoNotUseOrElse","elem","lastChild","removeChild","setInnerHtml","goog.dom.safe.setInnerHtml","asserts","ENABLE_ASSERTS","tagName","toUpperCase","Error","setOuterHtml","goog.dom.safe.setOuterHtml","outerHTML","setFormElementAction","goog.dom.safe.setFormElementAction","form","url","safeUrl","SafeUrl","sanitizeAssertUnchanged","assertIsHTMLFormElement","action","unwrap","setButtonFormAction","goog.dom.safe.setButtonFormAction","button","assertIsHTMLButtonElement","formAction","setInputFormAction","goog.dom.safe.setInputFormAction","input","assertIsHTMLInputElement","setStyle","goog.dom.safe.setStyle","style","cssText","SafeStyle","documentWrite","goog.dom.safe.documentWrite","doc","write","setAnchorHref","goog.dom.safe.setAnchorHref","anchor","assertIsHTMLAnchorElement","href","setImageSrc","goog.dom.safe.setImageSrc","imageElement","assertIsHTMLImageElement","allowDataUrl","test","src","setAudioSrc","goog.dom.safe.setAudioSrc","audioElement","assertIsHTMLAudioElement","setVideoSrc","goog.dom.safe.setVideoSrc","videoElement","assertIsHTMLVideoElement","setEmbedSrc","goog.dom.safe.setEmbedSrc","embed","assertIsHTMLEmbedElement","TrustedResourceUrl","unwrapTrustedScriptURL","setFrameSrc","goog.dom.safe.setFrameSrc","frame","assertIsHTMLFrameElement","setIframeSrc","goog.dom.safe.setIframeSrc","iframe","assertIsHTMLIFrameElement","setIframeSrcdoc","goog.dom.safe.setIframeSrcdoc","srcdoc","setLinkHrefAndRel","goog.dom.safe.setLinkHrefAndRel","link","rel","assertIsHTMLLinkElement","string","internal","caseInsensitiveContains","assert","setObjectData","goog.dom.safe.setObjectData","object","assertIsHTMLObjectElement","data","setScriptSrc","goog.dom.safe.setScriptSrc","script","assertIsHTMLScriptElement","nonce","getScriptNonce","setAttribute","setScriptContent","goog.dom.safe.setScriptContent","content","text","SafeScript","unwrapTrustedScript","setLocationHref","goog.dom.safe.setLocationHref","loc","assertIsLocation","assignLocation","goog.dom.safe.assignLocation","assign","replaceLocation","goog.dom.safe.replaceLocation","replace","openInWindow","goog.dom.safe.openInWindow","opt_openerWin","opt_name","opt_specs","opt_replace","win","global","open","Const","parseFromStringHtml","goog.dom.safe.parseFromStringHtml","parser","parseFromString","goog.dom.safe.parseFromString","type","createImageFromBlob","goog.dom.safe.createImageFromBlob","blob","objectUrl","URL","createObjectURL","image","Image","onload","image.onload","revokeObjectURL","uncheckedconversions","safeUrlFromStringKnownToSatisfyTypeContract","from"]
}
