{
"version":3,
"file":"goog.net.xhrio.js",
"lineCount":475,
"mappings":"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",
"sources":["goog/net/xhrio.js"],
"sourcesContent":["// Copyright 2006 The Closure Library Authors. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS-IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n/**\n * @fileoverview Wrapper class for handling XmlHttpRequests.\n *\n * One off requests can be sent through goog.net.XhrIo.send() or an\n * instance can be created to send multiple requests.  Each request uses its\n * own XmlHttpRequest object and handles clearing of the event callback to\n * ensure no leaks.\n *\n * XhrIo is event based, it dispatches events on success, failure, finishing,\n * ready-state change, or progress (download and upload).\n *\n * The ready-state or timeout event fires first, followed by\n * a generic completed event. Then the abort, error, or success event\n * is fired as appropriate. Progress events are fired as they are\n * received. Lastly, the ready event will fire to indicate that the\n * object may be used to make another request.\n *\n * The error event may also be called before completed and\n * ready-state-change if the XmlHttpRequest.open() or .send() methods throw.\n *\n * This class does not support multiple requests, queuing, or prioritization.\n *\n * When progress events are supported by the browser, and progress is\n * enabled via .setProgressEventsEnabled(true), the\n * goog.net.EventType.PROGRESS event will be the re-dispatched browser\n * progress event. Additionally, a DOWNLOAD_PROGRESS or UPLOAD_PROGRESS event\n * will be fired for download and upload progress respectively.\n *\n */\n\n\ngoog.provide('goog.net.XhrIo');\ngoog.provide('goog.net.XhrIo.ResponseType');\n\ngoog.forwardDeclare('goog.Uri');\ngoog.require('goog.Timer');\ngoog.require('goog.array');\ngoog.require('goog.asserts');\ngoog.require('goog.debug.entryPointRegistry');\ngoog.require('goog.events.EventTarget');\ngoog.require('goog.json.hybrid');\ngoog.require('goog.log');\ngoog.require('goog.net.ErrorCode');\ngoog.require('goog.net.EventType');\ngoog.require('goog.net.HttpStatus');\ngoog.require('goog.net.XmlHttp');\ngoog.require('goog.object');\ngoog.require('goog.string');\ngoog.require('goog.structs');\ngoog.require('goog.structs.Map');\ngoog.require('goog.uri.utils');\ngoog.require('goog.userAgent');\n\ngoog.scope(function() {\n\n/**\n * Basic class for handling XMLHttpRequests.\n * @param {goog.net.XmlHttpFactory=} opt_xmlHttpFactory Factory to use when\n *     creating XMLHttpRequest objects.\n * @constructor\n * @extends {goog.events.EventTarget}\n */\ngoog.net.XhrIo = function(opt_xmlHttpFactory) {\n  XhrIo.base(this, 'constructor');\n\n  /**\n   * Map of default headers to add to every request, use:\n   * XhrIo.headers.set(name, value)\n   * @type {!goog.structs.Map}\n   */\n  this.headers = new goog.structs.Map();\n\n  /**\n   * Optional XmlHttpFactory\n   * @private {goog.net.XmlHttpFactory}\n   */\n  this.xmlHttpFactory_ = opt_xmlHttpFactory || null;\n\n  /**\n   * Whether XMLHttpRequest is active.  A request is active from the time send()\n   * is called until onReadyStateChange() is complete, or error() or abort()\n   * is called.\n   * @private {boolean}\n   */\n  this.active_ = false;\n\n  /**\n   * The XMLHttpRequest object that is being used for the transfer.\n   * @private {?goog.net.XhrLike.OrNative}\n   */\n  this.xhr_ = null;\n\n  /**\n   * The options to use with the current XMLHttpRequest object.\n   * @private {?Object}\n   */\n  this.xhrOptions_ = null;\n\n  /**\n   * Last URL that was requested.\n   * @private {string|goog.Uri}\n   */\n  this.lastUri_ = '';\n\n  /**\n   * Method for the last request.\n   * @private {string}\n   */\n  this.lastMethod_ = '';\n\n  /**\n   * Last error code.\n   * @private {!goog.net.ErrorCode}\n   */\n  this.lastErrorCode_ = goog.net.ErrorCode.NO_ERROR;\n\n  /**\n   * Last error message.\n   * @private {Error|string}\n   */\n  this.lastError_ = '';\n\n  /**\n   * Used to ensure that we don't dispatch an multiple ERROR events. This can\n   * happen in IE when it does a synchronous load and one error is handled in\n   * the ready statte change and one is handled due to send() throwing an\n   * exception.\n   * @private {boolean}\n   */\n  this.errorDispatched_ = false;\n\n  /**\n   * Used to make sure we don't fire the complete event from inside a send call.\n   * @private {boolean}\n   */\n  this.inSend_ = false;\n\n  /**\n   * Used in determining if a call to {@link #onReadyStateChange_} is from\n   * within a call to this.xhr_.open.\n   * @private {boolean}\n   */\n  this.inOpen_ = false;\n\n  /**\n   * Used in determining if a call to {@link #onReadyStateChange_} is from\n   * within a call to this.xhr_.abort.\n   * @private {boolean}\n   */\n  this.inAbort_ = false;\n\n  /**\n   * Number of milliseconds after which an incomplete request will be aborted\n   * and a {@link goog.net.EventType.TIMEOUT} event raised; 0 means no timeout\n   * is set.\n   * @private {number}\n   */\n  this.timeoutInterval_ = 0;\n\n  /**\n   * Timer to track request timeout.\n   * @private {?number}\n   */\n  this.timeoutId_ = null;\n\n  /**\n   * The requested type for the response. The empty string means use the default\n   * XHR behavior.\n   * @private {goog.net.XhrIo.ResponseType}\n   */\n  this.responseType_ = ResponseType.DEFAULT;\n\n  /**\n   * Whether a \"credentialed\" request is to be sent (one that is aware of\n   * cookies and authentication). This is applicable only for cross-domain\n   * requests and more recent browsers that support this part of the HTTP Access\n   * Control standard.\n   *\n   * @see http://www.w3.org/TR/XMLHttpRequest/#the-withcredentials-attribute\n   *\n   * @private {boolean}\n   */\n  this.withCredentials_ = false;\n\n  /**\n   * Whether progress events are enabled for this request. This is\n   * disabled by default because setting a progress event handler\n   * causes pre-flight OPTIONS requests to be sent for CORS requests,\n   * even in cases where a pre-flight request would not otherwise be\n   * sent.\n   *\n   * @see http://xhr.spec.whatwg.org/#security-considerations\n   *\n   * Note that this can cause problems for Firefox 22 and below, as an\n   * older \"LSProgressEvent\" will be dispatched by the browser. That\n   * progress event is no longer supported, and can lead to failures,\n   * including throwing exceptions.\n   *\n   * @see http://bugzilla.mozilla.org/show_bug.cgi?id=845631\n   * @see b/23469793\n   *\n   * @private {boolean}\n   */\n  this.progressEventsEnabled_ = false;\n\n  /**\n   * True if we can use XMLHttpRequest's timeout directly.\n   * @private {boolean}\n   */\n  this.useXhr2Timeout_ = false;\n};\ngoog.inherits(goog.net.XhrIo, goog.events.EventTarget);\n\nvar XhrIo = goog.net.XhrIo;\n\n/**\n * Response types that may be requested for XMLHttpRequests.\n * @enum {string}\n * @see http://www.w3.org/TR/XMLHttpRequest/#the-responsetype-attribute\n */\ngoog.net.XhrIo.ResponseType = {\n  DEFAULT: '',\n  TEXT: 'text',\n  DOCUMENT: 'document',\n  // Not supported as of Chrome 10.0.612.1 dev\n  BLOB: 'blob',\n  ARRAY_BUFFER: 'arraybuffer'\n};\n\nvar ResponseType = goog.net.XhrIo.ResponseType;\n\n\n/**\n * A reference to the XhrIo logger\n * @private {?goog.log.Logger}\n * @const\n */\ngoog.net.XhrIo.prototype.logger_ = goog.log.getLogger('goog.net.XhrIo');\n\n\n/**\n * The Content-Type HTTP header name\n * @type {string}\n */\ngoog.net.XhrIo.CONTENT_TYPE_HEADER = 'Content-Type';\n\n\n/**\n * The Content-Transfer-Encoding HTTP header name\n * @type {string}\n */\ngoog.net.XhrIo.CONTENT_TRANSFER_ENCODING = 'Content-Transfer-Encoding';\n\n\n/**\n * The pattern matching the 'http' and 'https' URI schemes\n * @type {!RegExp}\n */\ngoog.net.XhrIo.HTTP_SCHEME_PATTERN = /^https?$/i;\n\n\n/**\n * The methods that typically come along with form data.  We set different\n * headers depending on whether the HTTP action is one of these.\n * @type {!Array<string>}\n */\ngoog.net.XhrIo.METHODS_WITH_FORM_DATA = ['POST', 'PUT'];\n\n\n/**\n * The Content-Type HTTP header value for a url-encoded form\n * @type {string}\n */\ngoog.net.XhrIo.FORM_CONTENT_TYPE =\n    'application/x-www-form-urlencoded;charset=utf-8';\n\n\n/**\n * The XMLHttpRequest Level two timeout delay ms property name.\n *\n * @see http://www.w3.org/TR/XMLHttpRequest/#the-timeout-attribute\n *\n * @private {string}\n * @const\n */\ngoog.net.XhrIo.XHR2_TIMEOUT_ = 'timeout';\n\n\n/**\n * The XMLHttpRequest Level two ontimeout handler property name.\n *\n * @see http://www.w3.org/TR/XMLHttpRequest/#the-timeout-attribute\n *\n * @private {string}\n * @const\n */\ngoog.net.XhrIo.XHR2_ON_TIMEOUT_ = 'ontimeout';\n\n\n/**\n * All non-disposed instances of goog.net.XhrIo created\n * by {@link goog.net.XhrIo.send} are in this Array.\n * @see goog.net.XhrIo.cleanup\n * @private {!Array<!goog.net.XhrIo>}\n */\ngoog.net.XhrIo.sendInstances_ = [];\n\n\n/**\n * Static send that creates a short lived instance of XhrIo to send the\n * request.\n * @see goog.net.XhrIo.cleanup\n * @param {string|goog.Uri} url Uri to make request to.\n * @param {?function(this:goog.net.XhrIo, ?)=} opt_callback Callback function\n *     for when request is complete.\n * @param {string=} opt_method Send method, default: GET.\n * @param {ArrayBuffer|ArrayBufferView|Blob|Document|FormData|string=}\n *     opt_content Body data.\n * @param {Object|goog.structs.Map=} opt_headers Map of headers to add to the\n *     request.\n * @param {number=} opt_timeoutInterval Number of milliseconds after which an\n *     incomplete request will be aborted; 0 means no timeout is set.\n * @param {boolean=} opt_withCredentials Whether to send credentials with the\n *     request. Default to false. See {@link goog.net.XhrIo#setWithCredentials}.\n * @return {!goog.net.XhrIo} The sent XhrIo.\n */\ngoog.net.XhrIo.send = function(\n    url, opt_callback, opt_method, opt_content, opt_headers,\n    opt_timeoutInterval, opt_withCredentials) {\n  var x = new goog.net.XhrIo();\n  goog.net.XhrIo.sendInstances_.push(x);\n  if (opt_callback) {\n    x.listen(goog.net.EventType.COMPLETE, opt_callback);\n  }\n  x.listenOnce(goog.net.EventType.READY, x.cleanupSend_);\n  if (opt_timeoutInterval) {\n    x.setTimeoutInterval(opt_timeoutInterval);\n  }\n  if (opt_withCredentials) {\n    x.setWithCredentials(opt_withCredentials);\n  }\n  x.send(url, opt_method, opt_content, opt_headers);\n  return x;\n};\n\n\n/**\n * Disposes all non-disposed instances of goog.net.XhrIo created by\n * {@link goog.net.XhrIo.send}.\n * {@link goog.net.XhrIo.send} cleans up the goog.net.XhrIo instance\n * it creates when the request completes or fails.  However, if\n * the request never completes, then the goog.net.XhrIo is not disposed.\n * This can occur if the window is unloaded before the request completes.\n * We could have {@link goog.net.XhrIo.send} return the goog.net.XhrIo\n * it creates and make the client of {@link goog.net.XhrIo.send} be\n * responsible for disposing it in this case.  However, this makes things\n * significantly more complicated for the client, and the whole point\n * of {@link goog.net.XhrIo.send} is that it's simple and easy to use.\n * Clients of {@link goog.net.XhrIo.send} should call\n * {@link goog.net.XhrIo.cleanup} when doing final\n * cleanup on window unload.\n */\ngoog.net.XhrIo.cleanup = function() {\n  var instances = goog.net.XhrIo.sendInstances_;\n  while (instances.length) {\n    instances.pop().dispose();\n  }\n};\n\n\n/**\n * Installs exception protection for all entry point introduced by\n * goog.net.XhrIo instances which are not protected by\n * {@link goog.debug.ErrorHandler#protectWindowSetTimeout},\n * {@link goog.debug.ErrorHandler#protectWindowSetInterval}, or\n * {@link goog.events.protectBrowserEventEntryPoint}.\n *\n * @param {goog.debug.ErrorHandler} errorHandler Error handler with which to\n *     protect the entry point(s).\n */\ngoog.net.XhrIo.protectEntryPoints = function(errorHandler) {\n  goog.net.XhrIo.prototype.onReadyStateChangeEntryPoint_ =\n      errorHandler.protectEntryPoint(\n          goog.net.XhrIo.prototype.onReadyStateChangeEntryPoint_);\n};\n\n\n/**\n * Disposes of the specified goog.net.XhrIo created by\n * {@link goog.net.XhrIo.send} and removes it from\n * {@link goog.net.XhrIo.pendingStaticSendInstances_}.\n * @private\n */\ngoog.net.XhrIo.prototype.cleanupSend_ = function() {\n  this.dispose();\n  goog.array.remove(goog.net.XhrIo.sendInstances_, this);\n};\n\n\n/**\n * Returns the number of milliseconds after which an incomplete request will be\n * aborted, or 0 if no timeout is set.\n * @return {number} Timeout interval in milliseconds.\n */\ngoog.net.XhrIo.prototype.getTimeoutInterval = function() {\n  return this.timeoutInterval_;\n};\n\n\n/**\n * Sets the number of milliseconds after which an incomplete request will be\n * aborted and a {@link goog.net.EventType.TIMEOUT} event raised; 0 means no\n * timeout is set.\n * @param {number} ms Timeout interval in milliseconds; 0 means none.\n */\ngoog.net.XhrIo.prototype.setTimeoutInterval = function(ms) {\n  this.timeoutInterval_ = Math.max(0, ms);\n};\n\n\n/**\n * Sets the desired type for the response. At time of writing, this is only\n * supported in very recent versions of WebKit (10.0.612.1 dev and later).\n *\n * If this is used, the response may only be accessed via {@link #getResponse}.\n *\n * @param {goog.net.XhrIo.ResponseType} type The desired type for the response.\n */\ngoog.net.XhrIo.prototype.setResponseType = function(type) {\n  this.responseType_ = type;\n};\n\n\n/**\n * Gets the desired type for the response.\n * @return {goog.net.XhrIo.ResponseType} The desired type for the response.\n */\ngoog.net.XhrIo.prototype.getResponseType = function() {\n  return this.responseType_;\n};\n\n\n/**\n * Sets whether a \"credentialed\" request that is aware of cookie and\n * authentication information should be made. This option is only supported by\n * browsers that support HTTP Access Control. As of this writing, this option\n * is not supported in IE.\n *\n * @param {boolean} withCredentials Whether this should be a \"credentialed\"\n *     request.\n */\ngoog.net.XhrIo.prototype.setWithCredentials = function(withCredentials) {\n  this.withCredentials_ = withCredentials;\n};\n\n\n/**\n * Gets whether a \"credentialed\" request is to be sent.\n * @return {boolean} The desired type for the response.\n */\ngoog.net.XhrIo.prototype.getWithCredentials = function() {\n  return this.withCredentials_;\n};\n\n\n/**\n * Sets whether progress events are enabled for this request. Note\n * that progress events require pre-flight OPTIONS request handling\n * for CORS requests, and may cause trouble with older browsers. See\n * progressEventsEnabled_ for details.\n * @param {boolean} enabled Whether progress events should be enabled.\n */\ngoog.net.XhrIo.prototype.setProgressEventsEnabled = function(enabled) {\n  this.progressEventsEnabled_ = enabled;\n};\n\n\n/**\n * Gets whether progress events are enabled.\n * @return {boolean} Whether progress events are enabled for this request.\n */\ngoog.net.XhrIo.prototype.getProgressEventsEnabled = function() {\n  return this.progressEventsEnabled_;\n};\n\n\n/**\n * Instance send that actually uses XMLHttpRequest to make a server call.\n * @param {string|goog.Uri} url Uri to make request to.\n * @param {string=} opt_method Send method, default: GET.\n * @param {ArrayBuffer|ArrayBufferView|Blob|Document|FormData|string=}\n *     opt_content Body data.\n * @param {Object|goog.structs.Map=} opt_headers Map of headers to add to the\n *     request.\n * @suppress {deprecated} Use deprecated goog.structs.forEach to allow different\n * types of parameters for opt_headers.\n */\ngoog.net.XhrIo.prototype.send = function(\n    url, opt_method, opt_content, opt_headers) {\n  if (this.xhr_) {\n    throw new Error(\n        '[goog.net.XhrIo] Object is active with another request=' +\n        this.lastUri_ + '; newUri=' + url);\n  }\n\n  var method = opt_method ? opt_method.toUpperCase() : 'GET';\n\n  this.lastUri_ = url;\n  this.lastError_ = '';\n  this.lastErrorCode_ = goog.net.ErrorCode.NO_ERROR;\n  this.lastMethod_ = method;\n  this.errorDispatched_ = false;\n  this.active_ = true;\n\n  // Use the factory to create the XHR object and options\n  this.xhr_ = this.createXhr();\n  this.xhrOptions_ = this.xmlHttpFactory_ ? this.xmlHttpFactory_.getOptions() :\n                                            goog.net.XmlHttp.getOptions();\n\n  // Set up the onreadystatechange callback\n  this.xhr_.onreadystatechange = goog.bind(this.onReadyStateChange_, this);\n\n  // Set up upload/download progress events, if progress events are supported.\n  if (this.getProgressEventsEnabled() && 'onprogress' in this.xhr_) {\n    this.xhr_.onprogress =\n        goog.bind(function(e) { this.onProgressHandler_(e, true); }, this);\n    if (this.xhr_.upload) {\n      this.xhr_.upload.onprogress = goog.bind(this.onProgressHandler_, this);\n    }\n  }\n\n  /**\n   * Try to open the XMLHttpRequest (always async), if an error occurs here it\n   * is generally permission denied\n   */\n  try {\n    goog.log.fine(this.logger_, this.formatMsg_('Opening Xhr'));\n    this.inOpen_ = true;\n    this.xhr_.open(method, String(url), true);  // Always async!\n    this.inOpen_ = false;\n  } catch (err) {\n    goog.log.fine(\n        this.logger_, this.formatMsg_('Error opening Xhr: ' + err.message));\n    this.error_(goog.net.ErrorCode.EXCEPTION, err);\n    return;\n  }\n\n  // We can't use null since this won't allow requests with form data to have a\n  // content length specified which will cause some proxies to return a 411\n  // error.\n  var content = opt_content || '';\n\n  var headers = this.headers.clone();\n\n  // Add headers specific to this request\n  if (opt_headers) {\n    goog.structs.forEach(\n        opt_headers, function(value, key) { headers.set(key, value); });\n  }\n\n  // Find whether a content type header is set, ignoring case.\n  // HTTP header names are case-insensitive.  See:\n  // http://www.w3.org/Protocols/rfc2616/rfc2616-sec4.html#sec4.2\n  var contentTypeKey =\n      goog.array.find(headers.getKeys(), goog.net.XhrIo.isContentTypeHeader_);\n\n  var contentIsFormData =\n      (goog.global['FormData'] && (content instanceof goog.global['FormData']));\n  if (goog.array.contains(goog.net.XhrIo.METHODS_WITH_FORM_DATA, method) &&\n      !contentTypeKey && !contentIsFormData) {\n    // For requests typically with form data, default to the url-encoded form\n    // content type unless this is a FormData request.  For FormData,\n    // the browser will automatically add a multipart/form-data content type\n    // with an appropriate multipart boundary.\n    headers.set(\n        goog.net.XhrIo.CONTENT_TYPE_HEADER, goog.net.XhrIo.FORM_CONTENT_TYPE);\n  }\n\n  // Add the headers to the Xhr object\n  headers.forEach(function(value, key) {\n    this.xhr_.setRequestHeader(key, value);\n  }, this);\n\n  if (this.responseType_) {\n    this.xhr_.responseType = this.responseType_;\n  }\n  // Set xhr_.withCredentials only when the value is different, or else in\n  // synchronous XMLHtppRequest.open Firefox will throw an exception.\n  // https://bugzilla.mozilla.org/show_bug.cgi?id=736340\n  if ('withCredentials' in this.xhr_ &&\n      this.xhr_.withCredentials !== this.withCredentials_) {\n    this.xhr_.withCredentials = this.withCredentials_;\n  }\n\n  /**\n   * Try to send the request, or other wise report an error (404 not found).\n   */\n  try {\n    this.cleanUpTimeoutTimer_();  // Paranoid, should never be running.\n    if (this.timeoutInterval_ > 0) {\n      this.useXhr2Timeout_ = goog.net.XhrIo.shouldUseXhr2Timeout_(this.xhr_);\n      goog.log.fine(\n          this.logger_, this.formatMsg_(\n                            'Will abort after ' + this.timeoutInterval_ +\n                            'ms if incomplete, xhr2 ' + this.useXhr2Timeout_));\n      if (this.useXhr2Timeout_) {\n        this.xhr_[goog.net.XhrIo.XHR2_TIMEOUT_] = this.timeoutInterval_;\n        this.xhr_[goog.net.XhrIo.XHR2_ON_TIMEOUT_] =\n            goog.bind(this.timeout_, this);\n      } else {\n        this.timeoutId_ =\n            goog.Timer.callOnce(this.timeout_, this.timeoutInterval_, this);\n      }\n    }\n    goog.log.fine(this.logger_, this.formatMsg_('Sending request'));\n    this.inSend_ = true;\n    this.xhr_.send(content);\n    this.inSend_ = false;\n\n  } catch (err) {\n    goog.log.fine(this.logger_, this.formatMsg_('Send error: ' + err.message));\n    this.error_(goog.net.ErrorCode.EXCEPTION, err);\n  }\n};\n\n\n/**\n * Determines if the argument is an XMLHttpRequest that supports the level 2\n * timeout value and event.\n *\n * Currently, FF 21.0 OS X has the fields but won't actually call the timeout\n * handler.  Perhaps the confusion in the bug referenced below hasn't\n * entirely been resolved.\n *\n * @see http://www.w3.org/TR/XMLHttpRequest/#the-timeout-attribute\n * @see https://bugzilla.mozilla.org/show_bug.cgi?id=525816\n *\n * @param {!goog.net.XhrLike.OrNative} xhr The request.\n * @return {boolean} True if the request supports level 2 timeout.\n * @private\n */\ngoog.net.XhrIo.shouldUseXhr2Timeout_ = function(xhr) {\n  return goog.userAgent.IE && goog.userAgent.isVersionOrHigher(9) &&\n      typeof xhr[goog.net.XhrIo.XHR2_TIMEOUT_] === 'number' &&\n      xhr[goog.net.XhrIo.XHR2_ON_TIMEOUT_] !== undefined;\n};\n\n\n/**\n * @param {string} header An HTTP header key.\n * @return {boolean} Whether the key is a content type header (ignoring\n *     case.\n * @private\n */\ngoog.net.XhrIo.isContentTypeHeader_ = function(header) {\n  return goog.string.caseInsensitiveEquals(\n      goog.net.XhrIo.CONTENT_TYPE_HEADER, header);\n};\n\n\n/**\n * Creates a new XHR object.\n * @return {!goog.net.XhrLike.OrNative} The newly created XHR object.\n * @protected\n */\ngoog.net.XhrIo.prototype.createXhr = function() {\n  return this.xmlHttpFactory_ ? this.xmlHttpFactory_.createInstance() :\n                                goog.net.XmlHttp();\n};\n\n\n/**\n * The request didn't complete after {@link goog.net.XhrIo#timeoutInterval_}\n * milliseconds; raises a {@link goog.net.EventType.TIMEOUT} event and aborts\n * the request.\n * @private\n */\ngoog.net.XhrIo.prototype.timeout_ = function() {\n  if (typeof goog == 'undefined') {\n    // If goog is undefined then the callback has occurred as the application\n    // is unloading and will error.  Thus we let it silently fail.\n  } else if (this.xhr_) {\n    this.lastError_ =\n        'Timed out after ' + this.timeoutInterval_ + 'ms, aborting';\n    this.lastErrorCode_ = goog.net.ErrorCode.TIMEOUT;\n    goog.log.fine(this.logger_, this.formatMsg_(this.lastError_));\n    this.dispatchEvent(goog.net.EventType.TIMEOUT);\n    this.abort(goog.net.ErrorCode.TIMEOUT);\n  }\n};\n\n\n/**\n * Something errorred, so inactivate, fire error callback and clean up\n * @param {goog.net.ErrorCode} errorCode The error code.\n * @param {Error} err The error object.\n * @private\n */\ngoog.net.XhrIo.prototype.error_ = function(errorCode, err) {\n  this.active_ = false;\n  if (this.xhr_) {\n    this.inAbort_ = true;\n    this.xhr_.abort();  // Ensures XHR isn't hung (FF)\n    this.inAbort_ = false;\n  }\n  this.lastError_ = err;\n  this.lastErrorCode_ = errorCode;\n  this.dispatchErrors_();\n  this.cleanUpXhr_();\n};\n\n\n/**\n * Dispatches COMPLETE and ERROR in case of an error. This ensures that we do\n * not dispatch multiple error events.\n * @private\n */\ngoog.net.XhrIo.prototype.dispatchErrors_ = function() {\n  if (!this.errorDispatched_) {\n    this.errorDispatched_ = true;\n    this.dispatchEvent(goog.net.EventType.COMPLETE);\n    this.dispatchEvent(goog.net.EventType.ERROR);\n  }\n};\n\n\n/**\n * Abort the current XMLHttpRequest\n * @param {goog.net.ErrorCode=} opt_failureCode Optional error code to use -\n *     defaults to ABORT.\n */\ngoog.net.XhrIo.prototype.abort = function(opt_failureCode) {\n  if (this.xhr_ && this.active_) {\n    goog.log.fine(this.logger_, this.formatMsg_('Aborting'));\n    this.active_ = false;\n    this.inAbort_ = true;\n    this.xhr_.abort();\n    this.inAbort_ = false;\n    this.lastErrorCode_ = opt_failureCode || goog.net.ErrorCode.ABORT;\n    this.dispatchEvent(goog.net.EventType.COMPLETE);\n    this.dispatchEvent(goog.net.EventType.ABORT);\n    this.cleanUpXhr_();\n  }\n};\n\n\n/**\n * Nullifies all callbacks to reduce risks of leaks.\n * @override\n * @protected\n */\ngoog.net.XhrIo.prototype.disposeInternal = function() {\n  if (this.xhr_) {\n    // We explicitly do not call xhr_.abort() unless active_ is still true.\n    // This is to avoid unnecessarily aborting a successful request when\n    // dispose() is called in a callback triggered by a complete response, but\n    // in which browser cleanup has not yet finished.\n    // (See http://b/issue?id=1684217.)\n    if (this.active_) {\n      this.active_ = false;\n      this.inAbort_ = true;\n      this.xhr_.abort();\n      this.inAbort_ = false;\n    }\n    this.cleanUpXhr_(true);\n  }\n\n  XhrIo.base(this, 'disposeInternal');\n};\n\n\n/**\n * Internal handler for the XHR object's readystatechange event.  This method\n * checks the status and the readystate and fires the correct callbacks.\n * If the request has ended, the handlers are cleaned up and the XHR object is\n * nullified.\n * @private\n */\ngoog.net.XhrIo.prototype.onReadyStateChange_ = function() {\n  if (this.isDisposed()) {\n    // This method is the target of an untracked goog.Timer.callOnce().\n    return;\n  }\n  if (!this.inOpen_ && !this.inSend_ && !this.inAbort_) {\n    // Were not being called from within a call to this.xhr_.send\n    // this.xhr_.abort, or this.xhr_.open, so this is an entry point\n    this.onReadyStateChangeEntryPoint_();\n  } else {\n    this.onReadyStateChangeHelper_();\n  }\n};\n\n\n/**\n * Used to protect the onreadystatechange handler entry point.  Necessary\n * as {#onReadyStateChange_} maybe called from within send or abort, this\n * method is only called when {#onReadyStateChange_} is called as an\n * entry point.\n * {@see #protectEntryPoints}\n * @private\n */\ngoog.net.XhrIo.prototype.onReadyStateChangeEntryPoint_ = function() {\n  this.onReadyStateChangeHelper_();\n};\n\n\n/**\n * Helper for {@link #onReadyStateChange_}.  This is used so that\n * entry point calls to {@link #onReadyStateChange_} can be routed through\n * {@link #onReadyStateChangeEntryPoint_}.\n * @private\n */\ngoog.net.XhrIo.prototype.onReadyStateChangeHelper_ = function() {\n  if (!this.active_) {\n    // can get called inside abort call\n    return;\n  }\n\n  if (typeof goog == 'undefined') {\n    // NOTE(user): If goog is undefined then the callback has occurred as the\n    // application is unloading and will error.  Thus we let it silently fail.\n\n  } else if (\n      this.xhrOptions_[goog.net.XmlHttp.OptionType.LOCAL_REQUEST_ERROR] &&\n      this.getReadyState() == goog.net.XmlHttp.ReadyState.COMPLETE &&\n      this.getStatus() == 2) {\n    // NOTE(user): In IE if send() errors on a *local* request the readystate\n    // is still changed to COMPLETE.  We need to ignore it and allow the\n    // try/catch around send() to pick up the error.\n    goog.log.fine(\n        this.logger_,\n        this.formatMsg_('Local request error detected and ignored'));\n\n  } else {\n    // In IE when the response has been cached we sometimes get the callback\n    // from inside the send call and this usually breaks code that assumes that\n    // XhrIo is asynchronous.  If that is the case we delay the callback\n    // using a timer.\n    if (this.inSend_ &&\n        this.getReadyState() == goog.net.XmlHttp.ReadyState.COMPLETE) {\n      goog.Timer.callOnce(this.onReadyStateChange_, 0, this);\n      return;\n    }\n\n    this.dispatchEvent(goog.net.EventType.READY_STATE_CHANGE);\n\n    // readyState indicates the transfer has finished\n    if (this.isComplete()) {\n      goog.log.fine(this.logger_, this.formatMsg_('Request complete'));\n\n      this.active_ = false;\n\n      try {\n        // Call the specific callbacks for success or failure. Only call the\n        // success if the status is 200 (HTTP_OK) or 304 (HTTP_CACHED)\n        if (this.isSuccess()) {\n          this.dispatchEvent(goog.net.EventType.COMPLETE);\n          this.dispatchEvent(goog.net.EventType.SUCCESS);\n        } else {\n          this.lastErrorCode_ = goog.net.ErrorCode.HTTP_ERROR;\n          this.lastError_ =\n              this.getStatusText() + ' [' + this.getStatus() + ']';\n          this.dispatchErrors_();\n        }\n      } finally {\n        this.cleanUpXhr_();\n      }\n    }\n  }\n};\n\n\n/**\n * Internal handler for the XHR object's onprogress event. Fires both a generic\n * PROGRESS event and either a DOWNLOAD_PROGRESS or UPLOAD_PROGRESS event to\n * allow specific binding for each XHR progress event.\n * @param {!ProgressEvent} e XHR progress event.\n * @param {boolean=} opt_isDownload Whether the current progress event is from a\n *     download. Used to determine whether DOWNLOAD_PROGRESS or UPLOAD_PROGRESS\n *     event should be dispatched.\n * @private\n */\ngoog.net.XhrIo.prototype.onProgressHandler_ = function(e, opt_isDownload) {\n  goog.asserts.assert(\n      e.type === goog.net.EventType.PROGRESS,\n      'goog.net.EventType.PROGRESS is of the same type as raw XHR progress.');\n  this.dispatchEvent(\n      goog.net.XhrIo.buildProgressEvent_(e, goog.net.EventType.PROGRESS));\n  this.dispatchEvent(\n      goog.net.XhrIo.buildProgressEvent_(\n          e, opt_isDownload ? goog.net.EventType.DOWNLOAD_PROGRESS :\n                              goog.net.EventType.UPLOAD_PROGRESS));\n};\n\n\n/**\n * Creates a representation of the native ProgressEvent. IE doesn't support\n * constructing ProgressEvent via \"new\", and the alternatives (e.g.,\n * ProgressEvent.initProgressEvent) are non-standard or deprecated.\n * @param {!ProgressEvent} e XHR progress event.\n * @param {!goog.net.EventType} eventType The type of the event.\n * @return {!ProgressEvent} The progress event.\n * @private\n */\ngoog.net.XhrIo.buildProgressEvent_ = function(e, eventType) {\n  return /** @type {!ProgressEvent} */ ({\n    type: eventType,\n    lengthComputable: e.lengthComputable,\n    loaded: e.loaded,\n    total: e.total\n  });\n};\n\n\n/**\n * Remove the listener to protect against leaks, and nullify the XMLHttpRequest\n * object.\n * @param {boolean=} opt_fromDispose If this is from the dispose (don't want to\n *     fire any events).\n * @private\n */\ngoog.net.XhrIo.prototype.cleanUpXhr_ = function(opt_fromDispose) {\n  if (this.xhr_) {\n    // Cancel any pending timeout event handler.\n    this.cleanUpTimeoutTimer_();\n\n    // Save reference so we can mark it as closed after the READY event.  The\n    // READY event may trigger another request, thus we must nullify this.xhr_\n    var xhr = this.xhr_;\n    var clearedOnReadyStateChange =\n        this.xhrOptions_[goog.net.XmlHttp.OptionType.USE_NULL_FUNCTION] ?\n        goog.nullFunction :\n        null;\n    this.xhr_ = null;\n    this.xhrOptions_ = null;\n\n    if (!opt_fromDispose) {\n      this.dispatchEvent(goog.net.EventType.READY);\n    }\n\n    try {\n      // NOTE(user): Not nullifying in FireFox can still leak if the callbacks\n      // are defined in the same scope as the instance of XhrIo. But, IE doesn't\n      // allow you to set the onreadystatechange to NULL so nullFunction is\n      // used.\n      xhr.onreadystatechange = clearedOnReadyStateChange;\n    } catch (e) {\n      // This seems to occur with a Gears HTTP request. Delayed the setting of\n      // this onreadystatechange until after READY is sent out and catching the\n      // error to see if we can track down the problem.\n      goog.log.error(\n          this.logger_,\n          'Problem encountered resetting onreadystatechange: ' + e.message);\n    }\n  }\n};\n\n\n/**\n * Make sure the timeout timer isn't running.\n * @private\n */\ngoog.net.XhrIo.prototype.cleanUpTimeoutTimer_ = function() {\n  if (this.xhr_ && this.useXhr2Timeout_) {\n    this.xhr_[goog.net.XhrIo.XHR2_ON_TIMEOUT_] = null;\n  }\n  if (this.timeoutId_) {\n    goog.Timer.clear(this.timeoutId_);\n    this.timeoutId_ = null;\n  }\n};\n\n\n/**\n * @return {boolean} Whether there is an active request.\n */\ngoog.net.XhrIo.prototype.isActive = function() {\n  return !!this.xhr_;\n};\n\n\n/**\n * @return {boolean} Whether the request has completed.\n */\ngoog.net.XhrIo.prototype.isComplete = function() {\n  return this.getReadyState() == goog.net.XmlHttp.ReadyState.COMPLETE;\n};\n\n\n/**\n * @return {boolean} Whether the request completed with a success.\n */\ngoog.net.XhrIo.prototype.isSuccess = function() {\n  var status = this.getStatus();\n  // A zero status code is considered successful for local files.\n  return goog.net.HttpStatus.isSuccess(status) ||\n      status === 0 && !this.isLastUriEffectiveSchemeHttp_();\n};\n\n\n/**\n * @return {boolean} whether the effective scheme of the last URI that was\n *     fetched was 'http' or 'https'.\n * @private\n */\ngoog.net.XhrIo.prototype.isLastUriEffectiveSchemeHttp_ = function() {\n  var scheme = goog.uri.utils.getEffectiveScheme(String(this.lastUri_));\n  return goog.net.XhrIo.HTTP_SCHEME_PATTERN.test(scheme);\n};\n\n\n/**\n * Get the readystate from the Xhr object\n * Will only return correct result when called from the context of a callback\n * @return {goog.net.XmlHttp.ReadyState} goog.net.XmlHttp.ReadyState.*.\n */\ngoog.net.XhrIo.prototype.getReadyState = function() {\n  return this.xhr_ ?\n      /** @type {goog.net.XmlHttp.ReadyState} */ (this.xhr_.readyState) :\n                                                 goog.net.XmlHttp.ReadyState\n                                                     .UNINITIALIZED;\n};\n\n\n/**\n * Get the status from the Xhr object\n * Will only return correct result when called from the context of a callback\n * @return {number} Http status.\n */\ngoog.net.XhrIo.prototype.getStatus = function() {\n  /**\n   * IE doesn't like you checking status until the readystate is greater than 2\n   * (i.e. it is receiving or complete).  The try/catch is used for when the\n   * page is unloading and an ERROR_NOT_AVAILABLE may occur when accessing xhr_.\n   */\n  try {\n    return this.getReadyState() > goog.net.XmlHttp.ReadyState.LOADED ?\n        this.xhr_.status :\n        -1;\n  } catch (e) {\n    return -1;\n  }\n};\n\n\n/**\n * Get the status text from the Xhr object\n * Will only return correct result when called from the context of a callback\n * @return {string} Status text.\n */\ngoog.net.XhrIo.prototype.getStatusText = function() {\n  /**\n   * IE doesn't like you checking status until the readystate is greater than 2\n   * (i.e. it is receiving or complete).  The try/catch is used for when the\n   * page is unloading and an ERROR_NOT_AVAILABLE may occur when accessing xhr_.\n   */\n  try {\n    return this.getReadyState() > goog.net.XmlHttp.ReadyState.LOADED ?\n        this.xhr_.statusText :\n        '';\n  } catch (e) {\n    goog.log.fine(this.logger_, 'Can not get status: ' + e.message);\n    return '';\n  }\n};\n\n\n/**\n * Get the last Uri that was requested\n * @return {string} Last Uri.\n */\ngoog.net.XhrIo.prototype.getLastUri = function() {\n  return String(this.lastUri_);\n};\n\n\n/**\n * Get the response text from the Xhr object\n * Will only return correct result when called from the context of a callback.\n * @return {string} Result from the server, or '' if no result available.\n */\ngoog.net.XhrIo.prototype.getResponseText = function() {\n  try {\n    return this.xhr_ ? this.xhr_.responseText : '';\n  } catch (e) {\n    // http://www.w3.org/TR/XMLHttpRequest/#the-responsetext-attribute\n    // states that responseText should return '' (and responseXML null)\n    // when the state is not LOADING or DONE. Instead, IE can\n    // throw unexpected exceptions, for example when a request is aborted\n    // or no data is available yet.\n    goog.log.fine(this.logger_, 'Can not get responseText: ' + e.message);\n    return '';\n  }\n};\n\n\n/**\n * Get the response body from the Xhr object. This property is only available\n * in IE since version 7 according to MSDN:\n * http://msdn.microsoft.com/en-us/library/ie/ms534368(v=vs.85).aspx\n * Will only return correct result when called from the context of a callback.\n *\n * One option is to construct a VBArray from the returned object and convert\n * it to a JavaScript array using the toArray method:\n * `(new window['VBArray'](xhrIo.getResponseBody())).toArray()`\n * This will result in an array of numbers in the range of [0..255]\n *\n * Another option is to use the VBScript CStr method to convert it into a\n * string as outlined in http://stackoverflow.com/questions/1919972\n *\n * @return {Object} Binary result from the server or null if not available.\n */\ngoog.net.XhrIo.prototype.getResponseBody = function() {\n  try {\n    if (this.xhr_ && 'responseBody' in this.xhr_) {\n      return this.xhr_['responseBody'];\n    }\n  } catch (e) {\n    // IE can throw unexpected exceptions, for example when a request is aborted\n    // or no data is yet available.\n    goog.log.fine(this.logger_, 'Can not get responseBody: ' + e.message);\n  }\n  return null;\n};\n\n\n/**\n * Get the response XML from the Xhr object\n * Will only return correct result when called from the context of a callback.\n * @return {Document} The DOM Document representing the XML file, or null\n * if no result available.\n */\ngoog.net.XhrIo.prototype.getResponseXml = function() {\n  try {\n    return this.xhr_ ? this.xhr_.responseXML : null;\n  } catch (e) {\n    goog.log.fine(this.logger_, 'Can not get responseXML: ' + e.message);\n    return null;\n  }\n};\n\n\n/**\n * Get the response and evaluates it as JSON from the Xhr object\n * Will only return correct result when called from the context of a callback\n * @param {string=} opt_xssiPrefix Optional XSSI prefix string to use for\n *     stripping of the response before parsing. This needs to be set only if\n *     your backend server prepends the same prefix string to the JSON response.\n * @throws Error if the response text is invalid JSON.\n * @return {Object|undefined} JavaScript object.\n */\ngoog.net.XhrIo.prototype.getResponseJson = function(opt_xssiPrefix) {\n  if (!this.xhr_) {\n    return undefined;\n  }\n\n  var responseText = this.xhr_.responseText;\n  if (opt_xssiPrefix && responseText.indexOf(opt_xssiPrefix) == 0) {\n    responseText = responseText.substring(opt_xssiPrefix.length);\n  }\n\n  return goog.json.hybrid.parse(responseText);\n};\n\n\n/**\n * Get the response as the type specificed by {@link #setResponseType}. At time\n * of writing, this is only directly supported in very recent versions of WebKit\n * (10.0.612.1 dev and later). If the field is not supported directly, we will\n * try to emulate it.\n *\n * Emulating the response means following the rules laid out at\n * http://www.w3.org/TR/XMLHttpRequest/#the-response-attribute\n *\n * On browsers with no support for this (Chrome < 10, Firefox < 4, etc), only\n * response types of DEFAULT or TEXT may be used, and the response returned will\n * be the text response.\n *\n * On browsers with Mozilla's draft support for array buffers (Firefox 4, 5),\n * only response types of DEFAULT, TEXT, and ARRAY_BUFFER may be used, and the\n * response returned will be either the text response or the Mozilla\n * implementation of the array buffer response.\n *\n * On browsers will full support, any valid response type supported by the\n * browser may be used, and the response provided by the browser will be\n * returned.\n *\n * @return {*} The response.\n */\ngoog.net.XhrIo.prototype.getResponse = function() {\n  try {\n    if (!this.xhr_) {\n      return null;\n    }\n    if ('response' in this.xhr_) {\n      return this.xhr_.response;\n    }\n    switch (this.responseType_) {\n      case ResponseType.DEFAULT:\n      case ResponseType.TEXT:\n        return this.xhr_.responseText;\n      // DOCUMENT and BLOB don't need to be handled here because they are\n      // introduced in the same spec that adds the .response field, and would\n      // have been caught above.\n      // ARRAY_BUFFER needs an implementation for Firefox 4, where it was\n      // implemented using a draft spec rather than the final spec.\n      case ResponseType.ARRAY_BUFFER:\n        if ('mozResponseArrayBuffer' in this.xhr_) {\n          return this.xhr_.mozResponseArrayBuffer;\n        }\n    }\n    // Fell through to a response type that is not supported on this browser.\n    goog.log.error(\n        this.logger_, 'Response type ' + this.responseType_ + ' is not ' +\n            'supported on this browser');\n    return null;\n  } catch (e) {\n    goog.log.fine(this.logger_, 'Can not get response: ' + e.message);\n    return null;\n  }\n};\n\n\n/**\n * Get the value of the response-header with the given name from the Xhr object\n * Will only return correct result when called from the context of a callback\n * and the request has completed\n * @param {string} key The name of the response-header to retrieve.\n * @return {string|undefined} The value of the response-header named key.\n */\ngoog.net.XhrIo.prototype.getResponseHeader = function(key) {\n  if (!this.xhr_ || !this.isComplete()) {\n    return undefined;\n  }\n\n  var value = this.xhr_.getResponseHeader(key);\n  return value === null ? undefined : value;\n};\n\n\n/**\n * Gets the text of all the headers in the response.\n * Will only return correct result when called from the context of a callback\n * and the request has completed.\n * @return {string} The value of the response headers or empty string.\n */\ngoog.net.XhrIo.prototype.getAllResponseHeaders = function() {\n  // getAllResponseHeaders can return null if no response has been received,\n  // ensure we always return an empty string.\n  return this.xhr_ && this.isComplete() ?\n      (this.xhr_.getAllResponseHeaders() || '') :\n      '';\n};\n\n\n/**\n * Returns all response headers as a key-value map.\n * Multiple values for the same header key can be combined into one,\n * separated by a comma and a space.\n * Note that the native getResponseHeader method for retrieving a single header\n * does a case insensitive match on the header name. This method does not\n * include any case normalization logic, it will just return a key-value\n * representation of the headers.\n * See: http://www.w3.org/TR/XMLHttpRequest/#the-getresponseheader()-method\n * @return {!Object<string, string>} An object with the header keys as keys\n *     and header values as values.\n */\ngoog.net.XhrIo.prototype.getResponseHeaders = function() {\n  // TODO(b/120371595): Make this function parse headers as per the spec\n  // (https://tools.ietf.org/html/rfc2616#section-4.2).\n\n  var headersObject = {};\n  var headersArray = this.getAllResponseHeaders().split('\\r\\n');\n  for (var i = 0; i < headersArray.length; i++) {\n    if (goog.string.isEmptyOrWhitespace(headersArray[i])) {\n      continue;\n    }\n    var keyValue =\n        goog.string.splitLimit(headersArray[i], ':', /* maxSplitCount= */ 1);\n    var key = keyValue[0];\n    var value = keyValue[1];\n\n    if (typeof value !== 'string') {\n      // There must be a value but it can be the empty string.\n      continue;\n    }\n\n    // Whitespace at the start and end of the value is meaningless.\n    value = value.trim();\n    // The key should not contain whitespace but we currently ignore that.\n\n    var values = headersObject[key] || [];\n    headersObject[key] = values;\n    values.push(value);\n  }\n\n  return goog.object.map(headersObject, function(values) {\n    return values.join(', ');\n  });\n};\n\n\n/**\n * Get the value of the response-header with the given name from the Xhr object.\n * As opposed to {@link #getResponseHeader}, this method does not require that\n * the request has completed.\n * @param {string} key The name of the response-header to retrieve.\n * @return {?string} The value of the response-header, or null if it is\n *     unavailable.\n */\ngoog.net.XhrIo.prototype.getStreamingResponseHeader = function(key) {\n  return this.xhr_ ? this.xhr_.getResponseHeader(key) : null;\n};\n\n\n/**\n * Gets the text of all the headers in the response. As opposed to\n * {@link #getAllResponseHeaders}, this method does not require that the request\n * has completed.\n * @return {string} The value of the response headers or empty string.\n */\ngoog.net.XhrIo.prototype.getAllStreamingResponseHeaders = function() {\n  return this.xhr_ ? this.xhr_.getAllResponseHeaders() : '';\n};\n\n\n/**\n * Get the last error message\n * @return {!goog.net.ErrorCode} Last error code.\n */\ngoog.net.XhrIo.prototype.getLastErrorCode = function() {\n  return this.lastErrorCode_;\n};\n\n\n/**\n * Get the last error message\n * @return {string} Last error message.\n */\ngoog.net.XhrIo.prototype.getLastError = function() {\n  return typeof this.lastError_ === 'string' ? this.lastError_ :\n                                               String(this.lastError_);\n};\n\n\n/**\n * Adds the last method, status and URI to the message.  This is used to add\n * this information to the logging calls.\n * @param {string} msg The message text that we want to add the extra text to.\n * @return {string} The message with the extra text appended.\n * @private\n */\ngoog.net.XhrIo.prototype.formatMsg_ = function(msg) {\n  return msg + ' [' + this.lastMethod_ + ' ' + this.lastUri_ + ' ' +\n      this.getStatus() + ']';\n};\n\n\n// Register the xhr handler as an entry point, so that\n// it can be monitored for exception handling, etc.\ngoog.debug.entryPointRegistry.register(\n    /**\n     * @param {function(!Function): !Function} transformer The transforming\n     *     function.\n     */\n    function(transformer) {\n      goog.net.XhrIo.prototype.onReadyStateChangeEntryPoint_ =\n          transformer(goog.net.XhrIo.prototype.onReadyStateChangeEntryPoint_);\n    });\n});  // goog.scope\n"],
"names":["goog","provide","forwardDeclare","require","scope","net","XhrIo","goog.net.XhrIo","opt_xmlHttpFactory","base","headers","structs","Map","xmlHttpFactory_","active_","xhr_","xhrOptions_","lastUri_","lastMethod_","lastErrorCode_","ErrorCode","NO_ERROR","lastError_","errorDispatched_","inSend_","inOpen_","inAbort_","timeoutInterval_","timeoutId_","responseType_","ResponseType","DEFAULT","withCredentials_","progressEventsEnabled_","useXhr2Timeout_","inherits","events","EventTarget","TEXT","DOCUMENT","BLOB","ARRAY_BUFFER","prototype","logger_","log","getLogger","CONTENT_TYPE_HEADER","CONTENT_TRANSFER_ENCODING","HTTP_SCHEME_PATTERN","METHODS_WITH_FORM_DATA","FORM_CONTENT_TYPE","XHR2_TIMEOUT_","XHR2_ON_TIMEOUT_","sendInstances_","send","goog.net.XhrIo.send","url","opt_callback","opt_method","opt_content","opt_headers","opt_timeoutInterval","opt_withCredentials","x","push","listen","EventType","COMPLETE","listenOnce","READY","cleanupSend_","setTimeoutInterval","setWithCredentials","cleanup","goog.net.XhrIo.cleanup","instances","length","pop","dispose","protectEntryPoints","goog.net.XhrIo.protectEntryPoints","errorHandler","onReadyStateChangeEntryPoint_","protectEntryPoint","goog.net.XhrIo.prototype.cleanupSend_","array","remove","getTimeoutInterval","goog.net.XhrIo.prototype.getTimeoutInterval","goog.net.XhrIo.prototype.setTimeoutInterval","ms","Math","max","setResponseType","goog.net.XhrIo.prototype.setResponseType","type","getResponseType","goog.net.XhrIo.prototype.getResponseType","goog.net.XhrIo.prototype.setWithCredentials","withCredentials","getWithCredentials","goog.net.XhrIo.prototype.getWithCredentials","setProgressEventsEnabled","goog.net.XhrIo.prototype.setProgressEventsEnabled","enabled","getProgressEventsEnabled","goog.net.XhrIo.prototype.getProgressEventsEnabled","goog.net.XhrIo.prototype.send","Error","method","toUpperCase","createXhr","getOptions","XmlHttp","onreadystatechange","bind","onReadyStateChange_","onprogress","e","onProgressHandler_","upload","fine","formatMsg_","open","String","err","message","error_","EXCEPTION","content","clone","forEach","value","key","set","contentTypeKey","find","getKeys","isContentTypeHeader_","contentIsFormData","global","contains","setRequestHeader","responseType","cleanUpTimeoutTimer_","shouldUseXhr2Timeout_","timeout_","Timer","callOnce","goog.net.XhrIo.shouldUseXhr2Timeout_","xhr","userAgent","IE","isVersionOrHigher","undefined","goog.net.XhrIo.isContentTypeHeader_","header","string","caseInsensitiveEquals","goog.net.XhrIo.prototype.createXhr","createInstance","goog.net.XhrIo.prototype.timeout_","TIMEOUT","dispatchEvent","abort","goog.net.XhrIo.prototype.error_","errorCode","dispatchErrors_","cleanUpXhr_","goog.net.XhrIo.prototype.dispatchErrors_","ERROR","goog.net.XhrIo.prototype.abort","opt_failureCode","ABORT","disposeInternal","goog.net.XhrIo.prototype.disposeInternal","goog.net.XhrIo.prototype.onReadyStateChange_","isDisposed","onReadyStateChangeHelper_","goog.net.XhrIo.prototype.onReadyStateChangeEntryPoint_","goog.net.XhrIo.prototype.onReadyStateChangeHelper_","OptionType","LOCAL_REQUEST_ERROR","getReadyState","ReadyState","getStatus","READY_STATE_CHANGE","isComplete","isSuccess","SUCCESS","HTTP_ERROR","getStatusText","goog.net.XhrIo.prototype.onProgressHandler_","opt_isDownload","asserts","assert","PROGRESS","buildProgressEvent_","DOWNLOAD_PROGRESS","UPLOAD_PROGRESS","goog.net.XhrIo.buildProgressEvent_","eventType","lengthComputable","loaded","total","goog.net.XhrIo.prototype.cleanUpXhr_","opt_fromDispose","clearedOnReadyStateChange","USE_NULL_FUNCTION","nullFunction","error","goog.net.XhrIo.prototype.cleanUpTimeoutTimer_","clear","isActive","goog.net.XhrIo.prototype.isActive","goog.net.XhrIo.prototype.isComplete","goog.net.XhrIo.prototype.isSuccess","status","HttpStatus","isLastUriEffectiveSchemeHttp_","goog.net.XhrIo.prototype.isLastUriEffectiveSchemeHttp_","scheme","uri","utils","getEffectiveScheme","test","goog.net.XhrIo.prototype.getReadyState","readyState","UNINITIALIZED","goog.net.XhrIo.prototype.getStatus","LOADED","goog.net.XhrIo.prototype.getStatusText","statusText","getLastUri","goog.net.XhrIo.prototype.getLastUri","getResponseText","goog.net.XhrIo.prototype.getResponseText","responseText","getResponseBody","goog.net.XhrIo.prototype.getResponseBody","getResponseXml","goog.net.XhrIo.prototype.getResponseXml","responseXML","getResponseJson","goog.net.XhrIo.prototype.getResponseJson","opt_xssiPrefix","indexOf","substring","json","hybrid","parse","getResponse","goog.net.XhrIo.prototype.getResponse","response","mozResponseArrayBuffer","getResponseHeader","goog.net.XhrIo.prototype.getResponseHeader","getAllResponseHeaders","goog.net.XhrIo.prototype.getAllResponseHeaders","getResponseHeaders","goog.net.XhrIo.prototype.getResponseHeaders","headersObject","headersArray","split","i","isEmptyOrWhitespace","keyValue","splitLimit","trim","values","object","map","join","getStreamingResponseHeader","goog.net.XhrIo.prototype.getStreamingResponseHeader","getAllStreamingResponseHeaders","goog.net.XhrIo.prototype.getAllStreamingResponseHeaders","getLastErrorCode","goog.net.XhrIo.prototype.getLastErrorCode","getLastError","goog.net.XhrIo.prototype.getLastError","goog.net.XhrIo.prototype.formatMsg_","msg","debug","entryPointRegistry","register","transformer"]
}
